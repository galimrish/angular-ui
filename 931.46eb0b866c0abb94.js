"use strict";(self.webpackChunkangular_ui=self.webpackChunkangular_ui||[]).push([[931],{8931:(go,nt,c)=>{c.r(nt),c.d(nt,{CrmModule:()=>ho});var C=c(4035),G=c(9787),y=c(6087),_=c(4847),I=c(6451),O=c(8675),T=c(9300),m=c(3900),w=c(5685),s=c(9633),b=c(2340);const x=(0,s.PH)("[Branch] Get",(0,s.Ky)()),E=(0,s.PH)("[Branch] Create",(0,s.Ky)()),D=(0,s.PH)("[Branch] Update",(0,s.Ky)()),Y=(0,s.PH)("[Branch] Get Success",(0,s.Ky)()),it=(0,s.PH)("[Branch] Create Success"),at=(0,s.PH)("[Branch] Update Success"),B=(0,w.H)({selectId:e=>e.id||""}),Ft=B.getInitialState({selectedId:null,pageInfo:{pageNumber:0,pageSize:b.N.pageSize,totalCount:0},isLoading:!1}),Tt=(0,s.Lq)(Ft,(0,s.on)(x,(e,{pageInfo:a})=>(console.log(x.type),Object.assign(Object.assign({},e),{pageInfo:a}))),(0,s.on)(Y,(e,{list:a,total:o})=>(console.log(Y.type),Object.assign(Object.assign({},B.setAll(a,e)),{isLoading:!1,pageInfo:Object.assign(Object.assign({},e.pageInfo),{totalCount:o})}))),(0,s.on)(E,D,e=>Object.assign(Object.assign({},e),{isLoading:!0})),(0,s.on)(it,at,e=>Object.assign(Object.assign({},e),{isLoading:!1}))),J=(0,s.ZF)("branch"),{selectAll:vt}=B.getSelectors(J),kt=(0,s.P1)(J,e=>e.pageInfo.totalCount),Nt=(0,s.P1)(J,e=>e.isLoading);var r=c(3075),u=c(8966),rt=c(4124),t=c(5e3),Q=c(4206),h=c(9808),Pt=c(7238);let St=(()=>{class e{constructor(o){this.fb=o,this.address=new rt.k,this.formDisabled=!0,this.loading=!1,this.changeCounter=0,this.changeFormAddress=new t.vpe(!0),this.addressFG=this.fb.group({zipFC:this.address.zip,regionFC:this.address.region,cityFC:this.address.city,streetFC:this.address.street,houseNumFC:this.address.houseNum,buildNumFC:this.address.buildNum,blockNumFC:this.address.blockNum,oneLineFC:this.address.oneLine}),this.subscription=this.addressFG.valueChanges.subscribe(()=>{this.addressFG.dirty&&this.changeFormAddress.emit(this.addressFG)})}ngOnChanges(o){o.address&&o.address.currentValue&&(o.address.previousValue?(o.address.currentValue.zip!==o.address.previousValue.zip&&this.addressFG.get("zipFC").setValue(o.address.currentValue.zip),o.address.currentValue.region!==o.address.previousValue.region&&this.addressFG.get("regionFC").setValue(o.address.currentValue.region),o.address.currentValue.city!==o.address.previousValue.city&&this.addressFG.get("cityFC").setValue(o.address.currentValue.city),o.address.currentValue.street!==o.address.previousValue.street&&this.addressFG.get("streetFC").setValue(o.address.currentValue.street),o.address.currentValue.houseNum!==o.address.previousValue.houseNum&&this.addressFG.get("houseNumFC").setValue(o.address.currentValue.houseNum),o.address.currentValue.buildNum!==o.address.previousValue.buildNum&&this.addressFG.get("buildNumFC").setValue(o.address.currentValue.buildNum),o.address.currentValue.blockNum!==o.address.previousValue.blockNum&&this.addressFG.get("blockNumFC").setValue(o.address.currentValue.blockNum),o.address.currentValue.oneLine!==o.address.previousValue.oneLine&&this.addressFG.get("oneLineFC").setValue(o.address.currentValue.oneLine)):(this.addressFG.get("zipFC").setValue(o.address.currentValue.zip),this.addressFG.get("regionFC").setValue(o.address.currentValue.region),this.addressFG.get("cityFC").setValue(o.address.currentValue.city),this.addressFG.get("streetFC").setValue(o.address.currentValue.street),this.addressFG.get("houseNumFC").setValue(o.address.currentValue.houseNum),this.addressFG.get("buildNumFC").setValue(o.address.currentValue.buildNum),this.addressFG.get("blockNumFC").setValue(o.address.currentValue.blockNum),this.addressFG.get("oneLineFC").setValue(o.address.currentValue.oneLine))),o.formDisabled&&(o.formDisabled.currentValue?this.addressFG.disable():this.addressFG.enable())}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-form-address"]],inputs:{address:"address",formDisabled:"formDisabled"},outputs:{changeFormAddress:"changeFormAddress"},features:[t.TTD],decls:49,vars:1,consts:[["name","Address","novalidate","",3,"formGroup"],[1,"form-group","row"],["for","region",1,"col-form-label","col-lg-3","text-right","text-nowrap"],[1,"col-lg-7"],["type","text","name","region","maxlength","50","formControlName","regionFC",1,"form-control"],["for","city",1,"col-form-label","col-lg-3","text-right","text-nowrap"],["type","text","name","city","maxlength","50","formControlName","cityFC",1,"form-control"],["for","street",1,"col-form-label","col-lg-3","text-right","text-nowrap"],["type","text","name","street","maxlength","50","formControlName","streetFC",1,"form-control"],["for","house",1,"col-form-label","col-lg-3","text-right","text-nowrap"],["type","text","name","house","maxlength","10","formControlName","houseNumFC",1,"form-control"],["for","building",1,"col-form-label","col-lg-3","text-right","text-nowrap"],["type","text","name","building","maxlength","10","formControlName","buildNumFC",1,"form-control"],["for","block",1,"col-form-label","col-lg-3","text-right","text-nowrap"],["type","text","name","block","maxlength","10","formControlName","blockNumFC",1,"form-control"],["for","zip",1,"col-form-label","col-lg-3","text-right","text-nowrap"],["type","text","name","zip","maxlength","10","formControlName","zipFC",1,"form-control"],["for","oneLine",1,"col-form-label","col-lg-3","text-right","text-nowrap"],["name","oneLine","maxlength","500","rows","3","formControlName","oneLineFC",1,"form-control"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0)(1,"div",1)(2,"label",2)(3,"span"),t._uU(4,"Region"),t.qZA()(),t.TgZ(5,"div",3),t._UZ(6,"input",4),t.qZA()(),t.TgZ(7,"div",1)(8,"label",5)(9,"span"),t._uU(10,"City"),t.qZA()(),t.TgZ(11,"div",3),t._UZ(12,"input",6),t.qZA()(),t.TgZ(13,"div",1)(14,"label",7)(15,"span"),t._uU(16,"Street"),t.qZA()(),t.TgZ(17,"div",3),t._UZ(18,"input",8),t.qZA()(),t.TgZ(19,"div",1)(20,"label",9)(21,"span"),t._uU(22,"House"),t.qZA()(),t.TgZ(23,"div",3),t._UZ(24,"input",10),t.qZA()(),t.TgZ(25,"div",1)(26,"label",11)(27,"span"),t._uU(28,"Building"),t.qZA()(),t.TgZ(29,"div",3),t._UZ(30,"input",12),t.qZA()(),t.TgZ(31,"div",1)(32,"label",13)(33,"span"),t._uU(34,"Block"),t.qZA()(),t.TgZ(35,"div",3),t._UZ(36,"input",14),t.qZA()(),t.TgZ(37,"div",1)(38,"label",15)(39,"span"),t._uU(40,"Zip"),t.qZA()(),t.TgZ(41,"div",3),t._UZ(42,"input",16),t.qZA()(),t.TgZ(43,"div",1)(44,"label",17)(45,"span"),t._uU(46,"OneLine"),t.qZA()(),t.TgZ(47,"div",3),t._UZ(48,"textarea",18),t.qZA()()()),2&o&&t.Q6J("formGroup",n.addressFG)},directives:[r._Y,r.JL,r.sg,r.Fj,r.nD,r.JJ,r.u],styles:[""]}),e})();var F=c(7423);const At=function(e){return{"text-danger":e}},xt=function(e){return{"border-danger":e}};let qt=(()=>{class e{constructor(o,n,i,d){this.fb=o,this.dialogRef=n,this.snackBar=i,this.data=d,this.branchFG=this.fb.group({nameFC:[d.type.name,[r.kI.required]],address:""}),this.address=d.type.address}changeFormAddress(o){this.address=new rt.k(o.get("zipFC").value,o.get("regionFC").value,o.get("cityFC").value,o.get("streetFC").value,o.get("houseNumFC").value,o.get("buildNumFC").value,o.get("blockNumFC").value,o.get("oneLineFC").value)}onSaveButton(){let o=this.branchFG.get("nameFC").value;o=o&&o.length>0?o.replace(" ",""):null,o?this.dialogRef.close({name:this.branchFG.get("nameFC").value,address:this.address}):this.snackBar.openSnackBar("Empty name is not allowed!","red-snackbar")}onCancelButton(){this.dialogRef.close()}ngOnDestroy(){this.branchFG.reset()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(u.so),t.Y36(Q.W),t.Y36(u.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-branch-edit"]],decls:19,vars:12,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate","",3,"formGroup"],[1,"form-group","row"],["for","name",1,"col-form-label","col-lg-3","text-right","text-nowrap",3,"ngClass"],["matTooltip","Name is required"],[1,"text-danger"],[1,"col-lg-7"],["type","text","name","name","maxlength","100","formControlName","nameFC",1,"form-control",3,"ngClass"],[3,"address","formDisabled","changeFormAddress"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"]],template:function(o,n){1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"label",4)(6,"span",5),t._uU(7,"Branch name"),t.TgZ(8,"span",6),t._uU(9,"\xa0*"),t.qZA()()(),t.TgZ(10,"div",7),t._UZ(11,"input",8),t.qZA()(),t.TgZ(12,"div",3)(13,"app-form-address",9),t.NdJ("changeFormAddress",function(d){return n.changeFormAddress(d)}),t.qZA()()()(),t.TgZ(14,"div",10)(15,"button",11),t.NdJ("click",function(){return n.onCancelButton()}),t._uU(16,"Cancel"),t.qZA(),t.TgZ(17,"button",12),t.NdJ("click",function(){return n.onSaveButton()}),t._uU(18),t.qZA()()),2&o&&(t.xp6(1),t.Oqu(n.data.type.id?"Edit":"Add"),t.xp6(2),t.Q6J("formGroup",n.branchFG),t.xp6(2),t.Q6J("ngClass",t.VKq(8,At,n.branchFG.get("nameFC").hasError("required")&&n.branchFG.get("nameFC").touched)),t.xp6(6),t.Q6J("ngClass",t.VKq(10,xt,n.branchFG.get("nameFC").hasError("required")&&n.branchFG.get("nameFC").touched)),t.xp6(2),t.Q6J("address",n.address)("formDisabled",!1),t.xp6(4),t.Q6J("disabled",n.branchFG.invalid),t.xp6(1),t.hij(" ",n.data.type.id?"Edit":"Add"," "))},directives:[u.uh,u.xY,r._Y,r.JL,r.sg,h.mk,Pt.gM,r.Fj,r.nD,r.JJ,r.u,St,u.H8,F.lW],styles:[""]}),e})();var ct=c(5265),g=c(288),Z=c(3489),v=c(7531),z=c(8371),p=c(2075),L=c(6710);function Ut(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div",3)(1,"button",4),t.NdJ("click",function(){return t.CHM(o),t.oxw().openEditDialog(void 0)}),t._uU(2,"Add"),t.qZA(),t._UZ(3,"app-button-history"),t.qZA()}}function Gt(e,a){1&e&&t._UZ(0,"tr",22)}function It(e,a){1&e&&t._UZ(0,"tr",23)}const Ot=function(e){return{hidden:e}};function wt(e,a){if(1&e&&(t._UZ(0,"tr",24),t.ALo(1,"async")),2&e){const o=t.oxw();t.Q6J("ngClass",t.VKq(3,Ot,t.lcZ(1,1,o.totalCount$)))}}function Et(e,a){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Name"),t.qZA())}function Dt(e,a){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.name)}}function Yt(e,a){1&e&&(t.TgZ(0,"th",27),t._uU(1,"Address"),t.qZA())}function Bt(e,a){if(1&e&&(t.TgZ(0,"td",26)(1,"div",0)(2,"div",28),t._uU(3,"Region:"),t.qZA(),t.TgZ(4,"div",29),t._uU(5),t.qZA()(),t.TgZ(6,"div",0)(7,"div",28),t._uU(8,"City:"),t.qZA(),t.TgZ(9,"div",29),t._uU(10),t.qZA()(),t.TgZ(11,"div",0)(12,"div",28),t._uU(13,"Street:"),t.qZA(),t.TgZ(14,"div",29),t._uU(15),t.qZA()(),t.TgZ(16,"div",0)(17,"div",28),t._uU(18,"House:"),t.qZA(),t.TgZ(19,"div",29),t._uU(20),t.qZA()(),t.TgZ(21,"div",0)(22,"div",28),t._uU(23,"Build:"),t.qZA(),t.TgZ(24,"div",29),t._uU(25),t.qZA()(),t.TgZ(26,"div",0)(27,"div",28),t._uU(28,"Block:"),t.qZA(),t.TgZ(29,"div",29),t._uU(30),t.qZA()(),t.TgZ(31,"div",0)(32,"div",28),t._uU(33,"Zip:"),t.qZA(),t.TgZ(34,"div",29),t._uU(35),t.qZA()(),t.TgZ(36,"div",0),t._uU(37,"\xa0"),t.qZA()()),2&e){const o=a.$implicit;t.xp6(5),t.Oqu(o.address.region||"-"),t.xp6(5),t.Oqu(o.address.city||"-"),t.xp6(5),t.Oqu(o.address.street||"-"),t.xp6(5),t.Oqu(o.address.houseNum||"-"),t.xp6(5),t.Oqu(o.address.buildNum||"-"),t.xp6(5),t.Oqu(o.address.blockNum||"-"),t.xp6(5),t.Oqu(o.address.zip||"-")}}function Jt(e,a){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Id"),t.qZA())}function Qt(e,a){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.id)}}function zt(e,a){1&e&&t._UZ(0,"th",27)}function Lt(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"app-button-edit",31),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit;return t.oxw().openEditDialog(i)}),t.qZA()}}function $t(e,a){if(1&e&&(t.TgZ(0,"td",26),t.YNc(1,Lt,1,0,"app-button-edit",30),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",!o.selectionMode)}}function Ht(e,a){if(1&e&&(t.TgZ(0,"td",32),t._uU(1," No records "),t.qZA()),2&e){const o=t.oxw();t.Q6J("colSpan",o.displayedColumns.length)}}function Vt(e,a){if(1&e&&(t.TgZ(0,"td",32),t._uU(1),t.ALo(2,"async"),t.qZA()),2&e){const o=t.oxw();t.Q6J("colSpan",o.displayedColumns.length),t.xp6(1),t.AsE(" Selected records: ",o.selection.length,", Total: ",t.lcZ(2,3,o.totalCount$)," ")}}let Rt=(()=>{class e{constructor(o,n,i,d,N,P){this.dialog=o,this.router=n,this.pageSize=i,this._pageSizeOptions=d,this.route=N,this.store=P,this.displayedColumns=["name","address","id","Operations"],this.footerColumns=["no_records"],this.subscriptions=[],this.selectionMode=!1,this.selection=[],this.nameFC=new r.NI(""),this.dataSource$=this.store.select(vt),this.totalCount$=this.store.select(kt),this.isLoading$=this.store.select(Nt);const S=d.split(",");this.pageSizeOptions=[],S.forEach(A=>this.pageSizeOptions.push(parseInt(A,10)))}ngAfterViewInit(){var o;null===(o=this.sort)||void 0===o||o.sortChange.subscribe(()=>this.paginator.pageIndex=0);let n=0;this.subscriptions.push(this.totalCount$.subscribe(i=>n=i||0)),this.subscriptions.push((0,I.T)(this.paginator.page,this.sort.sortChange).pipe((0,O.O)({})).subscribe(()=>this.store.dispatch(x({name:this.nameFC.value,pageInfo:{pageNumber:this.paginator.pageIndex,pageSize:this.paginator.pageSize,sortField:this.sort.active,sortOrder:this.sort.direction,totalCount:n}}))))}openHistory(){this.router.navigate(["history"],{relativeTo:this.route})}openEditDialog(o){const n=this.dialog.open(qt,{width:"500px",data:{type:o||new ct.I}});this.subscriptions.push(this.isLoading$.pipe((0,T.h)(i=>!i),(0,m.w)(()=>n.afterClosed())).subscribe(i=>{void 0!==i&&(this.store.dispatch(o?D({update:{id:o.id||"",changes:i}}):E({branch:new ct.I(void 0,i.name,i.code)})),this.search())}))}search(){this.paginator.pageIndex=0,this.paginator.page.emit()}clearFilters(){this.nameFC.reset(),this.search()}ngOnDestroy(){this.paginator.page.unsubscribe(),this.sort.sortChange.unsubscribe(),this.subscriptions.forEach(o=>o.unsubscribe())}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.uw),t.Y36(C.F0),t.Y36("pageSize"),t.Y36("pageSizeOptions"),t.Y36(C.gz),t.Y36(s.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-branch"]],viewQuery:function(o,n){if(1&o&&(t.Gf(y.NW,5),t.Gf(_.YE,5)),2&o){let i;t.iGM(i=t.CRH())&&(n.paginator=i.first),t.iGM(i=t.CRH())&&(n.sort=i.first)}},decls:38,vars:11,consts:[[1,"row"],[1,"col-lg"],["matInput","","placeholder","Name",3,"formControl"],[1,"button-row"],["mat-raised-button","","color","primary",3,"click"],["class","button-row",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matSortActive","name","matSortDirection","desc",1,"data-table",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","address"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","id"],["matColumnDef","Operations"],["matColumnDef","no_records"],["mat-footer-cell","","class","no-records",3,"colSpan",4,"matFooterCellDef"],["matColumnDef","selection_records"],["showFirstLastButtons","",3,"pageSize","length","pageSizeOptions"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",3,"ngClass"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"col-lg-4","text-right"],[1,"col-lg-8","text-left"],[3,"click",4,"ngIf"],[3,"click"],["mat-footer-cell","",1,"no-records",3,"colSpan"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t._uU(4," Filters "),t.qZA()(),t.TgZ(5,"div",0)(6,"div",1)(7,"mat-form-field"),t._UZ(8,"input",2),t.qZA()()(),t.TgZ(9,"div",3)(10,"button",4),t.NdJ("click",function(){return n.search()}),t._uU(11," Apply filters "),t.qZA(),t.TgZ(12,"button",4),t.NdJ("click",function(){return n.clearFilters()}),t._uU(13," Clear filters "),t.qZA()()()(),t.YNc(14,Ut,4,0,"div",5),t.TgZ(15,"div",6)(16,"table",7),t.YNc(17,Gt,1,0,"tr",8),t.YNc(18,It,1,0,"tr",9),t.YNc(19,wt,2,5,"tr",10),t.ynx(20,11),t.YNc(21,Et,2,0,"th",12),t.YNc(22,Dt,2,1,"td",13),t.BQk(),t.ynx(23,14),t.YNc(24,Yt,2,0,"th",15),t.YNc(25,Bt,38,7,"td",13),t.BQk(),t.ynx(26,16),t.YNc(27,Jt,2,0,"th",12),t.YNc(28,Qt,2,1,"td",13),t.BQk(),t.ynx(29,17),t.YNc(30,zt,1,0,"th",15),t.YNc(31,$t,2,1,"td",13),t.BQk(),t.ynx(32,18),t.YNc(33,Ht,2,1,"td",19),t.BQk(),t.ynx(34,20),t.YNc(35,Vt,3,5,"td",19),t.BQk(),t.qZA(),t._UZ(36,"mat-paginator",21),t.ALo(37,"async"),t.qZA()),2&o&&(t.xp6(8),t.Q6J("formControl",n.nameFC),t.xp6(6),t.Q6J("ngIf",!n.selectionMode),t.xp6(2),t.Q6J("dataSource",n.dataSource$),t.xp6(1),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",n.footerColumns),t.xp6(17),t.Q6J("pageSize",n.pageSize)("length",t.lcZ(37,9,n.totalCount$))("pageSizeOptions",n.pageSizeOptions))},directives:[g.pp,g.ib,g.yz,g.yK,Z.KE,v.Nt,r.Fj,r.JJ,r.oH,F.lW,h.O5,z.V,p.BZ,_.YE,p.as,p.XQ,p.nj,p.Gk,p.Ke,p.Q2,h.mk,p.w1,p.fO,p.ge,_.nU,p.Dz,p.ev,L.D,p.mD,p.yh,y.NW],pipes:[h.Ov],styles:[""]}),e})();const q=(0,s.PH)("[PickupPoint] Get",(0,s.Ky)()),$=(0,s.PH)("[PickupPoint] Create",(0,s.Ky)()),H=(0,s.PH)("[PickupPoint] Update",(0,s.Ky)()),V=(0,s.PH)("[PickupPoint] Get Success",(0,s.Ky)()),pt=(0,s.PH)("[PickupPoint] Delete",(0,s.Ky)()),lt=(0,s.PH)("[PickupPoint] Create Success"),dt=(0,s.PH)("[PickupPoint] Update Success"),Mt=(0,s.PH)("[PickupPoint] Delete Success"),R=(0,w.H)({selectId:e=>e.id||""}),jt=R.getInitialState({selectedId:null,pageInfo:{pageNumber:0,pageSize:b.N.pageSize,totalCount:0},isLoading:!1}),ut="pickupPoint",Kt=(0,s.Lq)(jt,(0,s.on)(q,(e,{pageInfo:a})=>(console.log(q.type),Object.assign(Object.assign({},e),{pageInfo:a}))),(0,s.on)(V,(e,{list:a,total:o})=>(console.log(V.type),Object.assign(Object.assign({},R.setAll(a,e)),{isLoading:!1,pageInfo:Object.assign(Object.assign({},e.pageInfo),{totalCount:o})}))),(0,s.on)($,H,e=>Object.assign(Object.assign({},e),{isLoading:!0})),(0,s.on)(lt,dt,e=>Object.assign(Object.assign({},e),{isLoading:!1}))),M=(0,s.ZF)(ut),{selectAll:Wt}=R.getSelectors(M),Xt=(0,s.P1)(M,e=>e.pageInfo.totalCount),te=(0,s.P1)(M,e=>e.isLoading);var mt=c(161);function ee(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Name is required "),t.qZA())}function oe(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Code is required "),t.qZA())}function ne(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Additional code is required "),t.qZA())}function ie(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," City is required "),t.qZA())}function ae(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Pickup point type is required "),t.qZA())}const k=function(e){return{"border-danger":e}};let se=(()=>{class e{constructor(o,n,i,d){this.fb=o,this.dialogRef=n,this.snackBar=i,this.data=d,this.pickupPointFG=this.fb.group({name:[this.data.type.name,[r.kI.required]],code:[this.data.type.code,[r.kI.required]],additionalCode:[this.data.type.additionalCode,[r.kI.required]],city:[this.data.type.city,[r.kI.required]],pickupPointTypeName:[this.data.type.pickupPointTypeName,[r.kI.required]]})}onSaveButton(){try{this.checkStringField("name"),this.checkStringField("additionalCode","Additional code"),this.checkStringField("city"),this.checkStringField("pickupPointTypeName","Pickup point type")}catch(n){return void this.snackBar.openSnackBar(n,"red-snackbar")}let o=this.pickupPointFG.get("code").value;o=Number(o),isNaN(o)?this.snackBar.openSnackBar("Code should be a valid number!","red-snackbar"):this.dialogRef.close({name:this.pickupPointFG.get("name").value,code:this.pickupPointFG.get("code").value,additionalCode:this.pickupPointFG.get("additionalCode").value,city:this.pickupPointFG.get("city").value,pickupPointTypeName:this.pickupPointFG.get("pickupPointTypeName").value})}checkStringField(o,n){let i=this.pickupPointFG.get(o).value;if(i=i&&i.length>0?i.replace(" ",""):null,!i)throw new Error(`Empty ${n||o} is not allowed!`)}onCancelButton(){this.dialogRef.close()}ngOnDestroy(){this.pickupPointFG.reset()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(u.so),t.Y36(Q.W),t.Y36(u.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-pickup-point-edit"]],decls:25,vars:24,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate","",3,"formGroup"],[1,"add-essence-container"],["matInput","","placeholder","Name","formControlName","name","maxlength","50","required","",3,"ngClass"],[4,"ngIf"],["matInput","","digitOnly","","autocomplete","off","placeholder","Code","formControlName","code","maxlength","50","required","",3,"ngClass"],["matInput","","placeholder","Additional code","formControlName","additionalCode","maxlength","50","required","",3,"ngClass"],["matInput","","placeholder","City","formControlName","city","maxlength","50","required","",3,"ngClass"],["matInput","","placeholder","Pickup point type","formControlName","pickupPointTypeName","maxlength","50","required","",3,"ngClass"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"]],template:function(o,n){1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"mat-form-field"),t._UZ(6,"input",4),t.YNc(7,ee,2,0,"mat-error",5),t.qZA(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",6),t.YNc(10,oe,2,0,"mat-error",5),t.qZA(),t.TgZ(11,"mat-form-field"),t._UZ(12,"input",7),t.YNc(13,ne,2,0,"mat-error",5),t.qZA(),t.TgZ(14,"mat-form-field"),t._UZ(15,"input",8),t.YNc(16,ie,2,0,"mat-error",5),t.qZA(),t.TgZ(17,"mat-form-field"),t._UZ(18,"input",9),t.YNc(19,ae,2,0,"mat-error",5),t.qZA()()()(),t.TgZ(20,"div",10)(21,"button",11),t.NdJ("click",function(){return n.onCancelButton()}),t._uU(22,"Cancel"),t.qZA(),t.TgZ(23,"button",12),t.NdJ("click",function(){return n.onSaveButton()}),t._uU(24),t.qZA()()),2&o&&(t.xp6(1),t.Oqu(n.data.type.id?"Edit":"Add"),t.xp6(2),t.Q6J("formGroup",n.pickupPointFG),t.xp6(3),t.Q6J("ngClass",t.VKq(14,k,n.pickupPointFG.get("name").hasError("required")&&n.pickupPointFG.get("name").touched)),t.xp6(1),t.Q6J("ngIf",n.pickupPointFG.get("name").hasError("required")&&n.pickupPointFG.get("name").touched),t.xp6(2),t.Q6J("ngClass",t.VKq(16,k,n.pickupPointFG.get("code").hasError("required")&&n.pickupPointFG.get("code").touched)),t.xp6(1),t.Q6J("ngIf",n.pickupPointFG.get("code").hasError("required")&&n.pickupPointFG.get("code").touched),t.xp6(2),t.Q6J("ngClass",t.VKq(18,k,n.pickupPointFG.get("additionalCode").hasError("required")&&n.pickupPointFG.get("additionalCode").touched)),t.xp6(1),t.Q6J("ngIf",n.pickupPointFG.get("additionalCode").hasError("required")&&n.pickupPointFG.get("additionalCode").touched),t.xp6(2),t.Q6J("ngClass",t.VKq(20,k,n.pickupPointFG.get("city").hasError("required")&&n.pickupPointFG.get("city").touched)),t.xp6(1),t.Q6J("ngIf",n.pickupPointFG.get("city").hasError("required")&&n.pickupPointFG.get("city").touched),t.xp6(2),t.Q6J("ngClass",t.VKq(22,k,n.pickupPointFG.get("pickupPointTypeName").hasError("required")&&n.pickupPointFG.get("pickupPointTypeName").touched)),t.xp6(1),t.Q6J("ngIf",n.pickupPointFG.get("pickupPointTypeName").hasError("required")&&n.pickupPointFG.get("pickupPointTypeName").touched),t.xp6(4),t.Q6J("disabled",n.pickupPointFG.invalid),t.xp6(1),t.hij(" ",n.data.type.id?"Edit":"Add"," "))},directives:[u.uh,u.xY,r._Y,r.JL,r.sg,Z.KE,v.Nt,r.Fj,r.JJ,r.u,r.nD,r.Q7,h.mk,h.O5,Z.TO,mt.L,u.H8,F.lW],styles:[""]}),e})();var ht=c(8647),gt=c(9077),ft=c(7687);function re(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div",5)(1,"button",6),t.NdJ("click",function(){return t.CHM(o),t.oxw().openEditDialog(void 0)}),t._uU(2,"Add"),t.qZA(),t._UZ(3,"app-button-history"),t.qZA()}}function ce(e,a){1&e&&t._UZ(0,"tr",25)}function pe(e,a){1&e&&t._UZ(0,"tr",26)}const le=function(e){return{hidden:e}};function de(e,a){if(1&e&&(t._UZ(0,"tr",27),t.ALo(1,"async")),2&e){const o=t.oxw();t.Q6J("ngClass",t.VKq(3,le,t.lcZ(1,1,o.totalCount$)))}}function ue(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Name"),t.qZA())}function me(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.name)}}function he(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Code"),t.qZA())}function ge(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.code)}}function fe(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Additional code"),t.qZA())}function _e(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.additionalCode)}}function Ce(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1,"City"),t.qZA())}function Ze(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.city)}}function ye(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Pickup point type"),t.qZA())}function be(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.pickupPointTypeName)}}function Fe(e,a){1&e&&t._UZ(0,"th",30)}function Te(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"app-button-edit",32),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit;return t.oxw().openEditDialog(i)}),t.qZA()}}function ve(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"app-button-delete",32),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit;return t.oxw().openDeleteDialog(i)}),t.qZA()}}function ke(e,a){if(1&e&&(t.TgZ(0,"td",29),t.YNc(1,Te,1,0,"app-button-edit",31),t.YNc(2,ve,1,0,"app-button-delete",31),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",!o.selectionMode),t.xp6(1),t.Q6J("ngIf",!o.selectionMode)}}function Ne(e,a){if(1&e&&(t.TgZ(0,"td",33),t._uU(1," No records "),t.qZA()),2&e){const o=t.oxw();t.Q6J("colSpan",o.displayedColumns.length)}}let Pe=(()=>{class e{constructor(o,n,i,d,N,P){this.dialog=o,this.router=n,this.pageSize=i,this._pageSizeOptions=d,this.route=N,this.store=P,this.displayedColumns=["name","code","additionalCode","city","pickupPointType","Operations"],this.footerColumns=["no_records"],this.subscriptions=[],this.selectionMode=!1,this.selection=[],this.nameFC=new r.NI(""),this.codeFC=new r.NI(""),this.cityFC=new r.NI(""),this.dataSource$=this.store.select(Wt),this.totalCount$=this.store.select(Xt),this.isLoading$=this.store.select(te);const S=d.split(",");this.pageSizeOptions=[],S.forEach(A=>this.pageSizeOptions.push(parseInt(A,10)))}ngAfterViewInit(){var o;null===(o=this.sort)||void 0===o||o.sortChange.subscribe(()=>this.paginator.pageIndex=0);let n=0;this.subscriptions.push(this.totalCount$.subscribe(i=>n=i||0)),this.subscriptions.push((0,I.T)(this.paginator.page,this.sort.sortChange).pipe((0,O.O)({})).subscribe(()=>this.store.dispatch(q({name:this.nameFC.value,code:this.codeFC.value,city:this.cityFC.value,pageInfo:{pageNumber:this.paginator.pageIndex,pageSize:this.paginator.pageSize,sortField:this.sort.active,sortOrder:this.sort.direction,totalCount:n}}))))}openHistory(){this.router.navigate(["history"],{relativeTo:this.route})}openEditDialog(o){const n=this.dialog.open(se,{width:"500px",data:{type:o||new ht.Y}});this.subscriptions.push(this.isLoading$.pipe((0,T.h)(i=>!i),(0,m.w)(()=>n.afterClosed())).subscribe(i=>{void 0!==i&&(this.store.dispatch(o?H({update:{id:o.id||"",changes:i}}):$({pickupPoint:new ht.Y(void 0,i.name,i.code,i.additionalCode,i.city,i.pickupPointTypeName)})),this.search())}))}openDeleteDialog(o){const n=this.dialog.open(gt.$,{width:"500px",data:{message:`Are you sure you want to delete '${o.name}'`,confirmBtnText:"Yes"}});this.subscriptions.push(this.isLoading$.pipe((0,T.h)(i=>!i),(0,m.w)(()=>n.afterClosed())).subscribe(i=>{i&&(this.store.dispatch(pt({id:o.id||"",name:o.name||""})),this.search())}))}search(){this.paginator.pageIndex=0,this.paginator.page.emit()}clearFilters(){this.nameFC.reset(),this.codeFC.reset(),this.cityFC.reset(),this.search()}ngOnDestroy(){this.paginator.page.unsubscribe(),this.sort.sortChange.unsubscribe(),this.subscriptions.forEach(o=>o.unsubscribe())}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.uw),t.Y36(C.F0),t.Y36("pageSize"),t.Y36("pageSizeOptions"),t.Y36(C.gz),t.Y36(s.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-pickup-point"]],viewQuery:function(o,n){if(1&o&&(t.Gf(y.NW,5),t.Gf(_.YE,5)),2&o){let i;t.iGM(i=t.CRH())&&(n.paginator=i.first),t.iGM(i=t.CRH())&&(n.sort=i.first)}},decls:48,vars:13,consts:[[1,"row"],[1,"col-lg"],["matInput","","placeholder","Name",3,"formControl"],["matInput","","digitOnly","","autocomplete","off","placeholder","Code",3,"formControl"],["matInput","","placeholder","City",3,"formControl"],[1,"button-row"],["mat-raised-button","","color","primary",3,"click"],["class","button-row",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matSortActive","name","matSortDirection","desc",1,"data-table",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","additionalCode"],["matColumnDef","city"],["matColumnDef","pickupPointType"],["matColumnDef","Operations"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","no_records"],["mat-footer-cell","","class","no-records",3,"colSpan",4,"matFooterCellDef"],["showFirstLastButtons","",3,"pageSize","length","pageSizeOptions"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",3,"ngClass"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"click",4,"ngIf"],[3,"click"],["mat-footer-cell","",1,"no-records",3,"colSpan"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t._uU(4," Filters "),t.qZA()(),t.TgZ(5,"div",0)(6,"div",1)(7,"mat-form-field"),t._UZ(8,"input",2),t.qZA()(),t.TgZ(9,"div",1)(10,"mat-form-field"),t._UZ(11,"input",3),t.qZA()(),t.TgZ(12,"div",1)(13,"mat-form-field"),t._UZ(14,"input",4),t.qZA()()(),t.TgZ(15,"div",5)(16,"button",6),t.NdJ("click",function(){return n.search()}),t._uU(17," Apply filters "),t.qZA(),t.TgZ(18,"button",6),t.NdJ("click",function(){return n.clearFilters()}),t._uU(19," Clear filters "),t.qZA()()()(),t.YNc(20,re,4,0,"div",7),t.TgZ(21,"div",8)(22,"table",9),t.YNc(23,ce,1,0,"tr",10),t.YNc(24,pe,1,0,"tr",11),t.YNc(25,de,2,5,"tr",12),t.ynx(26,13),t.YNc(27,ue,2,0,"th",14),t.YNc(28,me,2,1,"td",15),t.BQk(),t.ynx(29,16),t.YNc(30,he,2,0,"th",14),t.YNc(31,ge,2,1,"td",15),t.BQk(),t.ynx(32,17),t.YNc(33,fe,2,0,"th",14),t.YNc(34,_e,2,1,"td",15),t.BQk(),t.ynx(35,18),t.YNc(36,Ce,2,0,"th",14),t.YNc(37,Ze,2,1,"td",15),t.BQk(),t.ynx(38,19),t.YNc(39,ye,2,0,"th",14),t.YNc(40,be,2,1,"td",15),t.BQk(),t.ynx(41,20),t.YNc(42,Fe,1,0,"th",21),t.YNc(43,ke,3,2,"td",15),t.BQk(),t.ynx(44,22),t.YNc(45,Ne,2,1,"td",23),t.BQk(),t.qZA(),t._UZ(46,"mat-paginator",24),t.ALo(47,"async"),t.qZA()),2&o&&(t.xp6(8),t.Q6J("formControl",n.nameFC),t.xp6(3),t.Q6J("formControl",n.codeFC),t.xp6(3),t.Q6J("formControl",n.cityFC),t.xp6(6),t.Q6J("ngIf",!n.selectionMode),t.xp6(2),t.Q6J("dataSource",n.dataSource$),t.xp6(1),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",n.footerColumns),t.xp6(21),t.Q6J("pageSize",n.pageSize)("length",t.lcZ(47,11,n.totalCount$))("pageSizeOptions",n.pageSizeOptions))},directives:[g.pp,g.ib,g.yz,g.yK,Z.KE,v.Nt,r.Fj,r.JJ,r.oH,mt.L,F.lW,h.O5,z.V,p.BZ,_.YE,p.as,p.XQ,p.nj,p.Gk,p.Ke,p.Q2,h.mk,p.w1,p.fO,p.ge,_.nU,p.Dz,p.ev,L.D,ft.Z,p.mD,p.yh,y.NW],pipes:[h.Ov],styles:[""]}),e})();const U=(0,s.PH)("[Shop] Get",(0,s.Ky)()),j=(0,s.PH)("[Shop] Create",(0,s.Ky)()),K=(0,s.PH)("[Shop] Update",(0,s.Ky)()),W=(0,s.PH)("[Shop] Get Success",(0,s.Ky)()),_t=(0,s.PH)("[Shop] Delete",(0,s.Ky)()),Ct=(0,s.PH)("[Shop] Create Success"),Zt=(0,s.PH)("[Shop] Update Success"),Se=(0,s.PH)("[Shop] Delete Success"),X=(0,w.H)({selectId:e=>e.id||""}),Ae=X.getInitialState({selectedId:null,pageInfo:{pageNumber:0,pageSize:b.N.pageSize,totalCount:0},isLoading:!1}),xe=(0,s.Lq)(Ae,(0,s.on)(U,(e,{pageInfo:a})=>(console.log(U.type),Object.assign(Object.assign({},e),{pageInfo:a}))),(0,s.on)(W,(e,{list:a,total:o})=>(console.log(W.type),Object.assign(Object.assign({},X.setAll(a,e)),{isLoading:!1,pageInfo:Object.assign(Object.assign({},e.pageInfo),{totalCount:o})}))),(0,s.on)(j,K,e=>Object.assign(Object.assign({},e),{isLoading:!0})),(0,s.on)(Ct,Zt,e=>Object.assign(Object.assign({},e),{isLoading:!1}))),tt=(0,s.ZF)("shop"),{selectAll:qe}=X.getSelectors(tt),Ue=(0,s.P1)(tt,e=>e.pageInfo.totalCount),Ge=(0,s.P1)(tt,e=>e.isLoading);function Ie(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Name is required "),t.qZA())}function Oe(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Shop category is required "),t.qZA())}function we(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Merchandise is required "),t.qZA())}const et=function(e){return{"border-danger":e}};let Ee=(()=>{class e{constructor(o,n,i,d){this.fb=o,this.dialogRef=n,this.snackBar=i,this.data=d,this.shopFG=this.fb.group({name:[this.data.type.name,[r.kI.required]],shopCategory:[this.data.type.shopCategory,[r.kI.required]],merchandise:[this.data.type.merchandise,[r.kI.required]]})}onSaveButton(){try{this.checkStringField("name"),this.checkStringField("shopCategory","Shop category"),this.checkStringField("merchandise")}catch(o){return void this.snackBar.openSnackBar(o,"red-snackbar")}this.dialogRef.close({name:this.shopFG.get("name").value,shopCategory:this.shopFG.get("shopCategory").value,merchandise:this.shopFG.get("merchandise").value})}checkStringField(o,n){let i=this.shopFG.get(o).value;if(i=i&&i.length>0?i.replace(" ",""):null,!i)throw new Error(`Empty ${n||o} is not allowed!`)}onCancelButton(){this.dialogRef.close()}ngOnDestroy(){this.shopFG.reset()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(u.so),t.Y36(Q.W),t.Y36(u.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-shop-edit"]],decls:19,vars:16,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate","",3,"formGroup"],[1,"add-essence-container"],["matInput","","placeholder","Name","formControlName","name","maxlength","50","required","",3,"ngClass"],[4,"ngIf"],["matInput","","placeholder","Shop category","formControlName","shopCategory","maxlength","50","required","",3,"ngClass"],["matInput","","placeholder","Merchandise","formControlName","merchandise","maxlength","50","required","",3,"ngClass"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"]],template:function(o,n){1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"mat-form-field"),t._UZ(6,"input",4),t.YNc(7,Ie,2,0,"mat-error",5),t.qZA(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",6),t.YNc(10,Oe,2,0,"mat-error",5),t.qZA(),t.TgZ(11,"mat-form-field"),t._UZ(12,"input",7),t.YNc(13,we,2,0,"mat-error",5),t.qZA()()()(),t.TgZ(14,"div",8)(15,"button",9),t.NdJ("click",function(){return n.onCancelButton()}),t._uU(16,"Cancel"),t.qZA(),t.TgZ(17,"button",10),t.NdJ("click",function(){return n.onSaveButton()}),t._uU(18),t.qZA()()),2&o&&(t.xp6(1),t.Oqu(n.data.type.id?"Edit":"Add"),t.xp6(2),t.Q6J("formGroup",n.shopFG),t.xp6(3),t.Q6J("ngClass",t.VKq(10,et,n.shopFG.get("name").hasError("required")&&n.shopFG.get("name").touched)),t.xp6(1),t.Q6J("ngIf",n.shopFG.get("name").hasError("required")&&n.shopFG.get("name").touched),t.xp6(2),t.Q6J("ngClass",t.VKq(12,et,n.shopFG.get("shopCategory").hasError("required")&&n.shopFG.get("shopCategory").touched)),t.xp6(1),t.Q6J("ngIf",n.shopFG.get("shopCategory").hasError("required")&&n.shopFG.get("shopCategory").touched),t.xp6(2),t.Q6J("ngClass",t.VKq(14,et,n.shopFG.get("merchandise").hasError("required")&&n.shopFG.get("merchandise").touched)),t.xp6(1),t.Q6J("ngIf",n.shopFG.get("merchandise").hasError("required")&&n.shopFG.get("merchandise").touched),t.xp6(4),t.Q6J("disabled",n.shopFG.invalid),t.xp6(1),t.hij(" ",n.data.type.id?"Edit":"Add"," "))},directives:[u.uh,u.xY,r._Y,r.JL,r.sg,Z.KE,v.Nt,r.Fj,r.JJ,r.u,r.nD,r.Q7,h.mk,h.O5,Z.TO,u.H8,F.lW],styles:[""]}),e})();var bt=c(7901);function De(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div",5)(1,"button",6),t.NdJ("click",function(){return t.CHM(o),t.oxw().openEditDialog(void 0)}),t._uU(2,"Add"),t.qZA(),t._UZ(3,"app-button-history"),t.qZA()}}function Ye(e,a){1&e&&t._UZ(0,"tr",23)}function Be(e,a){1&e&&t._UZ(0,"tr",24)}const Je=function(e){return{hidden:e}};function Qe(e,a){if(1&e&&(t._UZ(0,"tr",25),t.ALo(1,"async")),2&e){const o=t.oxw();t.Q6J("ngClass",t.VKq(3,Je,t.lcZ(1,1,o.totalCount$)))}}function ze(e,a){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Name"),t.qZA())}function Le(e,a){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.name)}}function $e(e,a){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Shop category"),t.qZA())}function He(e,a){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.shopCategory)}}function Ve(e,a){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Merchandise"),t.qZA())}function Re(e,a){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.merchandise)}}function Me(e,a){1&e&&t._UZ(0,"th",28)}function je(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"app-button-edit",30),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit;return t.oxw().openEditDialog(i)}),t.qZA()}}function Ke(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"app-button-delete",30),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit;return t.oxw().openDeleteDialog(i)}),t.qZA()}}function We(e,a){if(1&e&&(t.TgZ(0,"td",27),t.YNc(1,je,1,0,"app-button-edit",29),t.YNc(2,Ke,1,0,"app-button-delete",29),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",!o.selectionMode),t.xp6(1),t.Q6J("ngIf",!o.selectionMode)}}function Xe(e,a){if(1&e&&(t.TgZ(0,"td",31),t._uU(1," No records "),t.qZA()),2&e){const o=t.oxw();t.Q6J("colSpan",o.displayedColumns.length)}}const eo=[{path:"branch",data:{breadcrumb:"Branch"},children:[{path:"",component:Rt,data:{expectedRole:"[ROLE_ADMIN, BRANCH, BRANCH_U]"}},{path:"history",pathMatch:"full",component:G.W,data:{type:"branch",breadcrumb:"Changes history",expectedRole:"[ROLE_ADMIN, BRANCH, BRANCH_U]"}}]},{path:"pickup-point",data:{breadcrumb:"Pickup point"},children:[{path:"",component:Pe,data:{expectedRole:"[ROLE_ADMIN, PICKUP_POINT, PICKUP_POINT_U]"}},{path:"history",pathMatch:"full",component:G.W,data:{type:"pickup-point",breadcrumb:"Changes history",expectedRole:"[ROLE_ADMIN, PICKUP_POINT, PICKUP_POINT_U]"}}]},{path:"shop",data:{breadcrumb:"Shop"},children:[{path:"",component:(()=>{class e{constructor(o,n,i,d,N,P){this.dialog=o,this.router=n,this.pageSize=i,this._pageSizeOptions=d,this.route=N,this.store=P,this.displayedColumns=["name","shopCategory","merchandise","Operations"],this.footerColumns=["no_records"],this.subscriptions=[],this.selectionMode=!1,this.selection=[],this.nameFC=new r.NI(""),this.shopCategoryFC=new r.NI(""),this.merchandiseFC=new r.NI(""),this.dataSource$=this.store.select(qe),this.totalCount$=this.store.select(Ue),this.isLoading$=this.store.select(Ge);const S=d.split(",");this.pageSizeOptions=[],S.forEach(A=>this.pageSizeOptions.push(parseInt(A,10)))}ngAfterViewInit(){var o;null===(o=this.sort)||void 0===o||o.sortChange.subscribe(()=>this.paginator.pageIndex=0);let n=0;this.subscriptions.push(this.totalCount$.subscribe(i=>n=i||0)),this.subscriptions.push((0,I.T)(this.paginator.page,this.sort.sortChange).pipe((0,O.O)({})).subscribe(()=>this.store.dispatch(U({name:this.nameFC.value,shopCategory:this.shopCategoryFC.value,merchandise:this.merchandiseFC.value,pageInfo:{pageNumber:this.paginator.pageIndex,pageSize:this.paginator.pageSize,sortField:this.sort.active,sortOrder:this.sort.direction,totalCount:n}}))))}openHistory(){this.router.navigate(["history"],{relativeTo:this.route})}openEditDialog(o){const n=this.dialog.open(Ee,{width:"500px",data:{type:o||new bt.k}});this.subscriptions.push(this.isLoading$.pipe((0,T.h)(i=>!i),(0,m.w)(()=>n.afterClosed())).subscribe(i=>{void 0!==i&&(this.store.dispatch(o?K({update:{id:o.id||"",changes:i}}):j({shop:new bt.k(void 0,i.name,i.shopCategory,i.merchandise)})),this.search())}))}openDeleteDialog(o){const n=this.dialog.open(gt.$,{width:"500px",data:{message:`Are you sure you want to delete '${o.name}'`,confirmBtnText:"Yes"}});this.subscriptions.push(this.isLoading$.pipe((0,T.h)(i=>!i),(0,m.w)(()=>n.afterClosed())).subscribe(i=>{i&&(this.store.dispatch(_t({id:o.id||"",name:o.name||""})),this.search())}))}search(){this.paginator.pageIndex=0,this.paginator.page.emit()}clearFilters(){this.nameFC.reset(),this.shopCategoryFC.reset(),this.merchandiseFC.reset(),this.search()}ngOnDestroy(){this.paginator.page.unsubscribe(),this.sort.sortChange.unsubscribe(),this.subscriptions.forEach(o=>o.unsubscribe())}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.uw),t.Y36(C.F0),t.Y36("pageSize"),t.Y36("pageSizeOptions"),t.Y36(C.gz),t.Y36(s.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-shop"]],viewQuery:function(o,n){if(1&o&&(t.Gf(y.NW,5),t.Gf(_.YE,5)),2&o){let i;t.iGM(i=t.CRH())&&(n.paginator=i.first),t.iGM(i=t.CRH())&&(n.sort=i.first)}},decls:42,vars:13,consts:[[1,"row"],[1,"col-lg"],["matInput","","placeholder","Name",3,"formControl"],["matInput","","placeholder","Shop category",3,"formControl"],["matInput","","placeholder","Merchandise",3,"formControl"],[1,"button-row"],["mat-raised-button","","color","primary",3,"click"],["class","button-row",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matSortActive","name","matSortDirection","desc",1,"data-table",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","shopCategory"],["matColumnDef","merchandise"],["matColumnDef","Operations"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","no_records"],["mat-footer-cell","","class","no-records",3,"colSpan",4,"matFooterCellDef"],["showFirstLastButtons","",3,"pageSize","length","pageSizeOptions"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",3,"ngClass"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"click",4,"ngIf"],[3,"click"],["mat-footer-cell","",1,"no-records",3,"colSpan"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t._uU(4," Filters "),t.qZA()(),t.TgZ(5,"div",0)(6,"div",1)(7,"mat-form-field"),t._UZ(8,"input",2),t.qZA()(),t.TgZ(9,"div",1)(10,"mat-form-field"),t._UZ(11,"input",3),t.qZA()(),t.TgZ(12,"div",1)(13,"mat-form-field"),t._UZ(14,"input",4),t.qZA()()(),t.TgZ(15,"div",5)(16,"button",6),t.NdJ("click",function(){return n.search()}),t._uU(17," Apply filters "),t.qZA(),t.TgZ(18,"button",6),t.NdJ("click",function(){return n.clearFilters()}),t._uU(19," Clear filters "),t.qZA()()()(),t.YNc(20,De,4,0,"div",7),t.TgZ(21,"div",8)(22,"table",9),t.YNc(23,Ye,1,0,"tr",10),t.YNc(24,Be,1,0,"tr",11),t.YNc(25,Qe,2,5,"tr",12),t.ynx(26,13),t.YNc(27,ze,2,0,"th",14),t.YNc(28,Le,2,1,"td",15),t.BQk(),t.ynx(29,16),t.YNc(30,$e,2,0,"th",14),t.YNc(31,He,2,1,"td",15),t.BQk(),t.ynx(32,17),t.YNc(33,Ve,2,0,"th",14),t.YNc(34,Re,2,1,"td",15),t.BQk(),t.ynx(35,18),t.YNc(36,Me,1,0,"th",19),t.YNc(37,We,3,2,"td",15),t.BQk(),t.ynx(38,20),t.YNc(39,Xe,2,1,"td",21),t.BQk(),t.qZA(),t._UZ(40,"mat-paginator",22),t.ALo(41,"async"),t.qZA()),2&o&&(t.xp6(8),t.Q6J("formControl",n.nameFC),t.xp6(3),t.Q6J("formControl",n.shopCategoryFC),t.xp6(3),t.Q6J("formControl",n.merchandiseFC),t.xp6(6),t.Q6J("ngIf",!n.selectionMode),t.xp6(2),t.Q6J("dataSource",n.dataSource$),t.xp6(1),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",n.footerColumns),t.xp6(15),t.Q6J("pageSize",n.pageSize)("length",t.lcZ(41,11,n.totalCount$))("pageSizeOptions",n.pageSizeOptions))},directives:[g.pp,g.ib,g.yz,g.yK,Z.KE,v.Nt,r.Fj,r.JJ,r.oH,F.lW,h.O5,z.V,p.BZ,_.YE,p.as,p.XQ,p.nj,p.Gk,p.Ke,p.Q2,h.mk,p.w1,p.fO,p.ge,_.nU,p.Dz,p.ev,L.D,ft.Z,p.mD,p.yh,y.NW],pipes:[h.Ov],styles:[""]}),e})(),data:{expectedRole:"[ROLE_ADMIN, SHOP, SHOP_U]"}},{path:"history",pathMatch:"full",component:G.W,data:{type:"shop",breadcrumb:"Changes history",expectedRole:"[ROLE_ADMIN, SHOP, SHOP_U]"}}]},{path:"**",redirectTo:"/home"}];let oo=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[C.Bz.forChild(eo)],C.Bz]}),e})();var l=c(6642),no=c(6325),io=c(2828),ao=c(520),so=c(4920),ot=c(8372),f=c(4004),ro=c(4830);let co=(()=>{class e{constructor(o,n){this.actions$=o,this.srv=n,this.getList$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(x),(0,ot.b)(b.N.debounceTime),(0,m.w)(i=>this.srv.getList(i.name,i.pageInfo.pageNumber,i.pageInfo.pageSize,i.pageInfo.sortField,i.pageInfo.sortOrder)),(0,f.U)(i=>Y({list:i.values,total:i.total})))),this.create$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(E),(0,m.w)(i=>this.srv.create(i.branch)),(0,f.U)(()=>it()))),this.update$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(D),(0,m.w)(i=>this.srv.update(i.update.id.toString(),i.update.changes)),(0,f.U)(()=>at())))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(l.eX),t.LFG(ro.b))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var po=c(7245);let lo=(()=>{class e{constructor(o,n){this.actions$=o,this.srv=n,this.getList$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(q),(0,ot.b)(b.N.debounceTime),(0,m.w)(i=>this.srv.getList(i.name,i.code,i.city,i.pageInfo.pageNumber,i.pageInfo.pageSize,i.pageInfo.sortField,i.pageInfo.sortOrder)),(0,f.U)(i=>V({list:i.values,total:i.total})))),this.create$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)($),(0,m.w)(i=>this.srv.create(i.pickupPoint)),(0,f.U)(()=>lt()))),this.update$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(H),(0,m.w)(i=>this.srv.update(i.update.id.toString(),i.update.changes)),(0,f.U)(()=>dt()))),this.delete$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(pt),(0,m.w)(i=>this.srv.delete(i.id,i.name)),(0,f.U)(()=>Mt())))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(l.eX),t.LFG(po.T))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var uo=c(745);let mo=(()=>{class e{constructor(o,n){this.actions$=o,this.srv=n,this.getList$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(U),(0,ot.b)(b.N.debounceTime),(0,m.w)(i=>this.srv.getList(i.name,i.shopCategory,i.merchandise,i.pageInfo.pageNumber,i.pageInfo.pageSize,i.pageInfo.sortField,i.pageInfo.sortOrder)),(0,f.U)(i=>W({list:i.values,total:i.total})))),this.create$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(j),(0,m.w)(i=>this.srv.create(i.shop)),(0,f.U)(()=>Ct()))),this.update$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(K),(0,m.w)(i=>this.srv.update(i.update.id.toString(),i.update.changes)),(0,f.U)(()=>Zt()))),this.delete$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(_t),(0,m.w)(i=>this.srv.delete(i.id,i.name)),(0,f.U)(()=>Se())))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(l.eX),t.LFG(uo.d))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),ho=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[{provide:ao.TP,useClass:so.k,multi:!0}],imports:[[oo,io.f,no.m,s.Aw.forFeature("branch",Tt),s.Aw.forFeature(ut,Kt),s.Aw.forFeature("shop",xe),l.sQ.forFeature([co]),l.sQ.forFeature([lo]),l.sQ.forFeature([mo])]]}),e})()}}]);