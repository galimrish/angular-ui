"use strict";(self.webpackChunkangular_ui=self.webpackChunkangular_ui||[]).push([[224],{2224:(go,at,s)=>{s.r(at),s.d(at,{HandbooksModule:()=>fo});var C=s(4035);class P{constructor(i,o,n,a,l){this.id=i,this.name=o,this.code=n,this.shortName=a}}var F=s(9787),I=s(6087),g=s(4847),Q=s(6451),J=s(8675),y=s(9300),f=s(3900),R=s(5685),r=s(9633),Z=s(2340);const k=(0,r.PH)("[Nomenclature] Get",(0,r.Ky)()),L=(0,r.PH)("[Nomenclature] Create",(0,r.Ky)()),z=(0,r.PH)("[Nomenclature] Update",(0,r.Ky)()),it=(0,r.PH)("[Nomenclature] Delete",(0,r.Ky)()),M=(0,r.PH)("[Nomenclature] Get Success",(0,r.Ky)()),rt=(0,r.PH)("[Nomenclature] Create Success"),st=(0,r.PH)("[Nomenclature] Update Success"),ct=(0,r.PH)("[Nomenclature] Delete Success"),$=(0,R.H)({selectId:e=>e.id||""}),yt=$.getInitialState({selectedId:null,pageInfo:{pageNumber:0,pageSize:Z.N.pageSize,totalCount:0},isLoading:!1}),pt="nomenclature",Tt=(0,r.Lq)(yt,(0,r.on)(k,(e,{pageInfo:i})=>(console.log(k.type),Object.assign(Object.assign({},e),{pageInfo:i}))),(0,r.on)(M,(e,{list:i,total:o})=>(console.log(M.type),Object.assign(Object.assign({},$.setAll(i,e)),{isLoading:!1,pageInfo:Object.assign(Object.assign({},e.pageInfo),{totalCount:o})}))),(0,r.on)(L,z,it,e=>Object.assign(Object.assign({},e),{isLoading:!0})),(0,r.on)(rt,st,ct,e=>Object.assign(Object.assign({},e),{isLoading:!1}))),B=(0,r.ZF)(pt),{selectAll:bt}=$.getSelectors(B),Nt=(0,r.P1)(B,e=>e.pageInfo.totalCount),Ft=(0,r.P1)(B,e=>e.isLoading);var lt=s(8024),p=s(3075),d=s(8966),t=s(5e3),G=s(4206),N=s(3489),U=s(7531),h=s(9808),K=s(161),S=s(7423);function It(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Name is required "),t.qZA())}function St(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Code is required "),t.qZA())}function Zt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Short name is required "),t.qZA())}function Et(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Weight is required "),t.qZA())}function vt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Incorrect value "),t.qZA())}const H=function(e){return{"border-danger":e}};let At=(()=>{class e{constructor(o,n,a,l){this.fb=o,this.dialogRef=n,this.snackBar=a,this.data=l,this.nomenclatureForm=this.fb.group({nameFC:[this.data.type.name,[p.kI.required]],codeFC:[this.data.type.code,[p.kI.required]],shortNameFC:[this.data.type.shortName,[p.kI.required]],weightFC:[this.data.type.weight,[p.kI.required,p.kI.min(0)]]})}onSaveButton(){let o=this.nomenclatureForm.get("nameFC").value;if(o=o&&o.length>0?o.replace(" ",""):null,!o)return void this.snackBar.openSnackBar("Empty name is not allowed!","red-snackbar");let n=this.nomenclatureForm.get("codeFC").value;n=Number(n),isNaN(n)?this.snackBar.openSnackBar("Code should be a valid number!","red-snackbar"):(this.data.type.name=this.nomenclatureForm.get("nameFC").value,this.data.type.code=this.nomenclatureForm.get("codeFC").value,this.data.type.shortName=this.nomenclatureForm.get("shortNameFC").value,this.data.type.weight=this.nomenclatureForm.get("weightFC").value,this.dialogRef.close(this.data.type))}onCancelButton(){this.dialogRef.close()}ngOnDestroy(){this.nomenclatureForm.reset()}canSave(){return this.nomenclatureForm.get("nameFC").valid&&this.nomenclatureForm.get("codeFC").valid&&this.nomenclatureForm.get("shortNameFC").valid&&this.nomenclatureForm.get("weightFC").valid}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.qu),t.Y36(d.so),t.Y36(G.W),t.Y36(d.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-nomenclature-edit"]],decls:23,vars:21,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate","",3,"formGroup"],[1,"add-essence-container"],["matInput","","placeholder","Name","formControlName","nameFC","maxlength","50","required","",3,"ngClass"],[4,"ngIf"],["matInput","","digitOnly","","autocomplete","off","placeholder","Code","formControlName","codeFC","maxlength","50","required","",3,"ngClass"],["matInput","","placeholder","Short name","formControlName","shortNameFC","maxlength","50","required","",3,"ngClass"],["matInput","","placeholder","Weight, kg","formControlName","weightFC","maxlength","50","required","",3,"ngClass"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"]],template:function(o,n){1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"mat-form-field"),t._UZ(6,"input",4),t.YNc(7,It,2,0,"mat-error",5),t.qZA(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",6),t.YNc(10,St,2,0,"mat-error",5),t.qZA(),t.TgZ(11,"mat-form-field"),t._UZ(12,"input",7),t.YNc(13,Zt,2,0,"mat-error",5),t.qZA(),t.TgZ(14,"mat-form-field"),t._UZ(15,"input",8),t.YNc(16,Et,2,0,"mat-error",5),t.YNc(17,vt,2,0,"mat-error",5),t.qZA()()()(),t.TgZ(18,"div",9)(19,"button",10),t.NdJ("click",function(){return n.onCancelButton()}),t._uU(20,"Cancel"),t.qZA(),t.TgZ(21,"button",11),t.NdJ("click",function(){return n.onSaveButton()}),t._uU(22),t.qZA()()),2&o&&(t.xp6(1),t.Oqu(n.data.type.id?"Edit":"Add"),t.xp6(2),t.Q6J("formGroup",n.nomenclatureForm),t.xp6(3),t.Q6J("ngClass",t.VKq(13,H,n.nomenclatureForm.get("nameFC").hasError("required")&&n.nomenclatureForm.get("nameFC").touched)),t.xp6(1),t.Q6J("ngIf",n.nomenclatureForm.get("nameFC").hasError("required")&&n.nomenclatureForm.get("nameFC").touched),t.xp6(2),t.Q6J("ngClass",t.VKq(15,H,n.nomenclatureForm.get("codeFC").hasError("required")&&n.nomenclatureForm.get("codeFC").touched)),t.xp6(1),t.Q6J("ngIf",n.nomenclatureForm.get("codeFC").hasError("required")&&n.nomenclatureForm.get("codeFC").touched),t.xp6(2),t.Q6J("ngClass",t.VKq(17,H,n.nomenclatureForm.get("shortNameFC").hasError("required")&&n.nomenclatureForm.get("shortNameFC").touched)),t.xp6(1),t.Q6J("ngIf",n.nomenclatureForm.get("shortNameFC").hasError("required")&&n.nomenclatureForm.get("shortNameFC").touched),t.xp6(2),t.Q6J("ngClass",t.VKq(19,H,n.nomenclatureForm.get("weightFC").hasError("required")&&n.nomenclatureForm.get("weightFC").touched)),t.xp6(1),t.Q6J("ngIf",n.nomenclatureForm.get("weightFC").hasError("required")&&n.nomenclatureForm.get("weightFC").touched),t.xp6(1),t.Q6J("ngIf",n.nomenclatureForm.get("weightFC").hasError("min")&&n.nomenclatureForm.get("weightFC").touched),t.xp6(4),t.Q6J("disabled",n.nomenclatureForm.invalid),t.xp6(1),t.hij(" ",n.data.type.id?"Edit":"Add"," "))},directives:[d.uh,d.xY,p._Y,p.JL,p.sg,N.KE,U.Nt,p.Fj,p.JJ,p.u,p.nD,p.Q7,h.mk,h.O5,N.TO,K.L,d.H8,S.lW],styles:[""]}),e})();var W=s(8371),c=s(2075),j=s(6710);function xt(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",18)(1,"button",19),t.NdJ("click",function(){return t.CHM(o),t.oxw().openEditDialog(void 0)}),t._uU(2,"Add"),t.qZA(),t._UZ(3,"app-button-history"),t.qZA()}}function kt(e,i){1&e&&t._UZ(0,"tr",20)}function Ut(e,i){1&e&&t._UZ(0,"tr",21)}const Ht=function(e){return{hidden:e}};function wt(e,i){if(1&e&&(t._UZ(0,"tr",22),t.ALo(1,"async")),2&e){const o=t.oxw();t.Q6J("ngClass",t.VKq(3,Ht,t.lcZ(1,1,o.totalCount$)))}}function Dt(e,i){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Name"),t.qZA())}function Ot(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.name)}}function Yt(e,i){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Code"),t.qZA())}function qt(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.code)}}function Pt(e,i){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Short name"),t.qZA())}function Qt(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.shortName)}}function Jt(e,i){1&e&&(t.TgZ(0,"th",23),t._uU(1,"weight"),t.qZA())}function Rt(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.weight)}}function Lt(e,i){1&e&&t._UZ(0,"th",25)}function zt(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"app-button-edit",27),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit;return t.oxw().openEditDialog(a)}),t.qZA()}}function Mt(e,i){if(1&e&&(t.TgZ(0,"td",24),t.YNc(1,zt,1,0,"app-button-edit",26),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",!o.selectionMode)}}function $t(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1," No records "),t.qZA()),2&e){const o=t.oxw();t.Q6J("colSpan",o.displayedColumns.length)}}function Bt(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"async"),t.qZA()),2&e){const o=t.oxw();t.Q6J("colSpan",o.displayedColumns.length),t.xp6(1),t.AsE(" Selected records: ",o.selection.length,", Total: ",t.lcZ(2,3,o.totalCount$)," ")}}let Gt=(()=>{class e{constructor(o,n,a,l,b,v){this.dialog=o,this.router=n,this.pageSize=a,this._pageSizeOptions=l,this.route=b,this.store=v,this.displayedColumns=["name","code","shortName","weight","Operations"],this.footerColumns=["no_records"],this.subscriptions=[],this.selectionMode=!1,this.selection=[],this.dataSource$=this.store.select(bt),this.totalCount$=this.store.select(Nt),this.isLoading$=this.store.select(Ft);const A=l.split(",");this.pageSizeOptions=[],A.forEach(x=>this.pageSizeOptions.push(parseInt(x,10)))}ngAfterViewInit(){var o;null===(o=this.sort)||void 0===o||o.sortChange.subscribe(()=>this.paginator.pageIndex=0);let n=0;this.subscriptions.push(this.totalCount$.subscribe(a=>n=a||0)),this.subscriptions.push((0,Q.T)(this.paginator.page,this.sort.sortChange).pipe((0,J.O)({})).subscribe(()=>this.store.dispatch(k({pageInfo:{pageNumber:this.paginator.pageIndex,pageSize:this.paginator.pageSize,sortField:this.sort.active,sortOrder:this.sort.direction,totalCount:n}}))))}openHistory(){this.router.navigate(["history"],{relativeTo:this.route})}openEditDialog(o){const n=this.dialog.open(At,{width:"500px",data:{type:o||new lt.U}});this.subscriptions.push(this.isLoading$.pipe((0,y.h)(a=>!a),(0,f.w)(()=>n.afterClosed())).subscribe(a=>{void 0!==a&&(this.store.dispatch(o?z({update:{id:o.id||"",changes:a}}):L({nomenclature:new lt.U(void 0,a.name,a.code)})),this.search())}))}search(){this.paginator.pageIndex=0,this.paginator.page.emit()}ngOnDestroy(){this.paginator.page.unsubscribe(),this.sort.sortChange.unsubscribe(),this.subscriptions.forEach(o=>o.unsubscribe())}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d.uw),t.Y36(C.F0),t.Y36("pageSize"),t.Y36("pageSizeOptions"),t.Y36(C.gz),t.Y36(r.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-nomenclature"]],viewQuery:function(o,n){if(1&o&&(t.Gf(I.NW,5),t.Gf(g.YE,5)),2&o){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.sort=a.first)}},decls:27,vars:10,consts:[["class","button-row",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matSortActive","name","matSortDirection","desc",1,"data-table",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","shortName"],["matColumnDef","weight"],["matColumnDef","Operations"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","no_records"],["mat-footer-cell","","class","no-records",3,"colSpan",4,"matFooterCellDef"],["matColumnDef","selection_records"],["showFirstLastButtons","",3,"pageSize","length","pageSizeOptions"],[1,"button-row"],["mat-raised-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",3,"ngClass"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"click",4,"ngIf"],[3,"click"],["mat-footer-cell","",1,"no-records",3,"colSpan"]],template:function(o,n){1&o&&(t.YNc(0,xt,4,0,"div",0),t.TgZ(1,"div",1)(2,"table",2),t.YNc(3,kt,1,0,"tr",3),t.YNc(4,Ut,1,0,"tr",4),t.YNc(5,wt,2,5,"tr",5),t.ynx(6,6),t.YNc(7,Dt,2,0,"th",7),t.YNc(8,Ot,2,1,"td",8),t.BQk(),t.ynx(9,9),t.YNc(10,Yt,2,0,"th",7),t.YNc(11,qt,2,1,"td",8),t.BQk(),t.ynx(12,10),t.YNc(13,Pt,2,0,"th",7),t.YNc(14,Qt,2,1,"td",8),t.BQk(),t.ynx(15,11),t.YNc(16,Jt,2,0,"th",7),t.YNc(17,Rt,2,1,"td",8),t.BQk(),t.ynx(18,12),t.YNc(19,Lt,1,0,"th",13),t.YNc(20,Mt,2,1,"td",8),t.BQk(),t.ynx(21,14),t.YNc(22,$t,2,1,"td",15),t.BQk(),t.ynx(23,16),t.YNc(24,Bt,3,5,"td",15),t.BQk(),t.qZA(),t._UZ(25,"mat-paginator",17),t.ALo(26,"async"),t.qZA()),2&o&&(t.Q6J("ngIf",!n.selectionMode),t.xp6(2),t.Q6J("dataSource",n.dataSource$),t.xp6(1),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",n.footerColumns),t.xp6(20),t.Q6J("pageSize",n.pageSize)("length",t.lcZ(26,8,n.totalCount$))("pageSizeOptions",n.pageSizeOptions))},directives:[h.O5,S.lW,W.V,c.BZ,g.YE,c.as,c.XQ,c.nj,c.Gk,c.Ke,c.Q2,h.mk,c.w1,c.fO,c.ge,g.nU,c.Dz,c.ev,j.D,c.mD,c.yh,I.NW],pipes:[h.Ov],styles:[""]}),e})();class mt{constructor(i,o,n,a){this.id=i,this.name=o,this.code=n,this.versionDate=a}}function Kt(e,i){1&e&&(t.TgZ(0,"h1",10),t._uU(1,"Edit"),t.qZA())}function Wt(e,i){1&e&&(t.TgZ(0,"h1",10),t._uU(1,"Add"),t.qZA())}function jt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Name is required "),t.qZA())}function Vt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Code is required "),t.qZA())}function Xt(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){return t.CHM(o),t.oxw().onSaveButton()}),t._uU(1,"Edit"),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("disabled",o.simpleForm.invalid)}}function te(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){return t.CHM(o),t.oxw().onSaveButton()}),t._uU(1,"Add"),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("disabled",o.simpleForm.invalid)}}const dt=function(e){return{"border-danger":e}};let ee=(()=>{class e{constructor(o,n,a,l){this.fb=o,this.dialogRef=n,this.snackBar=a,this.data=l,this.simpleForm=this.fb.group({nameFC:[this.data.type.name,[p.kI.required]],codeFC:[this.data.type.code,[p.kI.required]]})}onSaveButton(){let o=this.simpleForm.get("nameFC").value;if(o=o&&o.length>0?o.replace(" ",""):null,!o)return void this.snackBar.openSnackBar("Empty name is not allowed!","red-snackbar");let n=this.simpleForm.get("codeFC").value;n=Number(n),isNaN(n)?this.snackBar.openSnackBar("Code should be a valid number!","red-snackbar"):this.dialogRef.close({name:o,code:n})}onCancelButton(){this.dialogRef.close()}ngOnDestroy(){this.simpleForm.reset()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.qu),t.Y36(d.so),t.Y36(G.W),t.Y36(d.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-simple-handbook-edit"]],decls:16,vars:13,consts:[["mat-dialog-title","",4,"ngIf"],["mat-dialog-content",""],["novalidate","",3,"formGroup"],[1,"add-essence-container"],["matInput","","placeholder","Name","formControlName","nameFC","maxlength","50","required","",3,"ngClass"],[4,"ngIf"],["matInput","","digitOnly","","autocomplete","off","placeholder","Code","formControlName","codeFC","maxlength","50","required","",3,"ngClass"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","click",4,"ngIf"],["mat-dialog-title",""],["mat-button","",3,"disabled","click"]],template:function(o,n){1&o&&(t.YNc(0,Kt,2,0,"h1",0),t.YNc(1,Wt,2,0,"h1",0),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"mat-form-field"),t._UZ(6,"input",4),t.YNc(7,jt,2,0,"mat-error",5),t.qZA(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",6),t.YNc(10,Vt,2,0,"mat-error",5),t.qZA()()()(),t.TgZ(11,"div",7)(12,"button",8),t.NdJ("click",function(){return n.onCancelButton()}),t._uU(13,"Cancel"),t.qZA(),t.YNc(14,Xt,2,1,"button",9),t.YNc(15,te,2,1,"button",9),t.qZA()),2&o&&(t.Q6J("ngIf",null!=n.data.type.id),t.xp6(1),t.Q6J("ngIf",null==n.data.type.id),t.xp6(2),t.Q6J("formGroup",n.simpleForm),t.xp6(3),t.Q6J("ngClass",t.VKq(9,dt,n.simpleForm.get("nameFC").hasError("required")&&n.simpleForm.get("nameFC").touched)),t.xp6(1),t.Q6J("ngIf",n.simpleForm.get("nameFC").hasError("required")&&n.simpleForm.get("nameFC").touched),t.xp6(2),t.Q6J("ngClass",t.VKq(11,dt,n.simpleForm.get("codeFC").hasError("required")&&n.simpleForm.get("codeFC").touched)),t.xp6(1),t.Q6J("ngIf",n.simpleForm.get("codeFC").hasError("required")&&n.simpleForm.get("codeFC").touched),t.xp6(4),t.Q6J("ngIf",null!=n.data.type.id),t.xp6(1),t.Q6J("ngIf",null==n.data.type.id))},directives:[h.O5,d.uh,d.xY,p._Y,p.JL,p.sg,N.KE,U.Nt,p.Fj,p.JJ,p.u,p.nD,p.Q7,h.mk,N.TO,K.L,d.H8,S.lW],styles:[""]}),e})();var m=s(1029),oe=s(4285);const _=new Map,V=(e,i)=>{const o=new oe.x(e,i);if(!_.has(o.type))switch(i){case m.U.GET:_.set(o.type,(0,r.PH)(o.type,(0,r.Ky)())),_.set(`${o.type} Success`,null);break;case m.U.ADD:case m.U.UPDATE:case m.U.DELETE:_.set(o.type,(0,r.PH)(o.type,(0,r.Ky)()));break;default:_.set(o.type,(0,r.PH)(o.type))}return _.get(o.type)||(0,r.PH)("")},E=e=>_.has(e),X=(0,R.H)({selectId:e=>e.id||""}),ne=X.getInitialState({selectedSimpleHandbookId:null,path:"",handbookName:null,pageInfo:{pageNumber:0,pageSize:Z.N.pageSize,totalCount:0},isLoading:!1}),ut="simpleHandbook",ae=(e=ne,i)=>E(i.type)?(console.log(i.type),i.type.endsWith(m.U.GET)?Object.assign(Object.assign({},e),{pageInfo:i.page}):i.type.endsWith(m.U.GET_SUCCESS)?Object.assign(Object.assign({},X.setAll(i.payload.values,e)),{isLoading:!1,pageInfo:Object.assign(Object.assign({},e.pageInfo),{totalCount:i.payload.total})}):Object.assign(Object.assign({},e),{isLoading:i.type.endsWith(m.U.ADD)||i.type.endsWith(m.U.UPDATE)||i.type.endsWith(m.U.DELETE)})):e,tt=(0,r.ZF)(ut),{selectAll:ie}=X.getSelectors(tt),re=(0,r.P1)(tt,e=>e.pageInfo.totalCount),se=(0,r.P1)(tt,e=>e.isLoading);var ce=s(9077),w=s(288),pe=s(7687);function le(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t._uU(4," Filters "),t.qZA()(),t.TgZ(5,"div",17)(6,"div",18)(7,"mat-form-field"),t._UZ(8,"input",19),t.qZA()()(),t.TgZ(9,"div",20)(10,"button",21),t.NdJ("click",function(){return t.CHM(o),t.oxw().search()}),t._uU(11," Apply filters "),t.qZA(),t.TgZ(12,"button",21),t.NdJ("click",function(){return t.CHM(o),t.oxw().clearFilters()}),t._uU(13," Clear filters "),t.qZA()()()()}if(2&e){const o=t.oxw();t.xp6(8),t.Q6J("formControl",o.nameSearchFC)}}function me(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",20)(1,"button",21),t.NdJ("click",function(){return t.CHM(o),t.oxw().openEditDialog(void 0)}),t._uU(2,"Add"),t.qZA(),t._UZ(3,"app-button-history"),t.qZA()}}function de(e,i){1&e&&t._UZ(0,"tr",22)}function ue(e,i){1&e&&t._UZ(0,"tr",23)}const he=function(e){return{hidden:e}};function fe(e,i){if(1&e&&(t._UZ(0,"tr",24),t.ALo(1,"async")),2&e){const o=t.oxw();t.Q6J("ngClass",t.VKq(3,he,t.lcZ(1,1,o.totalCount$)))}}function ge(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Name"),t.qZA())}function _e(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.name)}}function Ce(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Code"),t.qZA())}function ye(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.code)}}function Te(e,i){1&e&&t._UZ(0,"th",27)}function be(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"app-button-edit",29),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit;return t.oxw().openEditDialog(a)}),t.qZA()}}function Ne(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"app-button-delete",29),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit;return t.oxw().openDeleteDialog(a)}),t.qZA()}}function Fe(e,i){if(1&e&&(t.TgZ(0,"td",26),t.YNc(1,be,1,0,"app-button-edit",28),t.YNc(2,Ne,1,0,"app-button-delete",28),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",!o.selectionMode),t.xp6(1),t.Q6J("ngIf",!o.selectionMode)}}function Ie(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1," No records "),t.qZA()),2&e){const o=t.oxw();t.Q6J("colSpan",o.displayedColumns.length)}}function Se(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"async"),t.qZA()),2&e){const o=t.oxw();t.Q6J("colSpan",o.displayedColumns.length),t.xp6(1),t.AsE(" Selected records: ",o.selection.length,", Total: ",t.lcZ(2,3,o.totalCount$)," ")}}let D=(()=>{class e{constructor(o,n,a,l,b,v){this.dialog=o,this.router=n,this.pageSize=a,this._pageSizeOptions=l,this.route=b,this.store=v,this.displayedColumns=["name","code","Operations"],this.footerColumns=["no_records"],this.selection=[],this.showFilter=!1,this.nameSearchFC=new p.NI(""),this.onFilterChange=new t.vpe,this.subscriptions=[],this.dataSource$=this.store.select(ie),this.totalCount$=this.store.select(re),this.isLoading$=this.store.select(se);const A=l.split(",");this.pageSizeOptions=[],A.forEach(x=>this.pageSizeOptions.push(parseInt(x,10))),this.type=this.route.snapshot.data.type,this.showFilter=this.route.snapshot.data.showFilter||!1,this.selectionMode=this.route.snapshot.queryParams.mode,"multi-select"===this.selectionMode&&this.displayedColumns.unshift("select"),"single-select"===this.selectionMode&&(this.displayedColumns=["Operations","name","code"])}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.subscriptions.push((0,Q.T)(this.paginator.page,this.sort.sortChange,this.onFilterChange).pipe((0,J.O)({})).subscribe(()=>this.getHandbooks()))}getHandbooks(){let o=0;return this.subscriptions.push(this.totalCount$.subscribe(n=>o=n||0)),this.store.dispatch(V(this.type,m.U.GET)({path:this.type,method:m.U.GET,page:{pageNumber:this.paginator.pageIndex,pageSize:this.paginator.pageSize,sortField:this.sort.active,sortOrder:this.sort.direction,totalCount:o},handbookName:this.nameSearchFC.value}))}openHistory(){this.router.navigate(["history"],{relativeTo:this.route})}openEditDialog(o){const n=this.dialog.open(ee,{width:"500px",data:{type:o||new mt}});this.subscriptions.push(this.isLoading$.pipe((0,y.h)(a=>!a),(0,f.w)(()=>n.afterClosed())).subscribe(a=>{if(void 0!==a){const l=o?m.U.UPDATE:m.U.ADD,b=o?{id:o.id,changes:{name:a.name,code:a.code}}:new mt(void 0,a.name,a.code);this.store.dispatch(V(this.type,l)({path:this.type,method:l,id:b.id,simpleHb:b})),this.search()}}))}openDeleteDialog(o){const n=this.dialog.open(ce.$,{width:"500px",data:{message:`Are you sure you want to delete '${o.name}'`,confirmBtnText:"Yes"}});this.subscriptions.push(this.isLoading$.pipe((0,y.h)(a=>!a),(0,f.w)(()=>n.afterClosed())).subscribe(a=>{a&&(this.store.dispatch(V(this.type,m.U.DELETE)({path:this.type,method:m.U.DELETE,id:o.id,name:o.name})),this.search())}))}search(){this.paginator.pageIndex=0,this.onFilterChange.emit(),this.getHandbooks()}clearFilters(){this.nameSearchFC.reset(),this.search()}ngOnDestroy(){this.paginator.page.unsubscribe(),this.sort.sortChange.unsubscribe(),this.onFilterChange.unsubscribe(),this.subscriptions.forEach(o=>o.unsubscribe())}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d.uw),t.Y36(C.F0),t.Y36("pageSize"),t.Y36("pageSizeOptions"),t.Y36(C.gz),t.Y36(r.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-simple-handbook"]],viewQuery:function(o,n){if(1&o&&(t.Gf(I.NW,5),t.Gf(g.YE,5)),2&o){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.sort=a.first)}},decls:22,vars:11,consts:[[4,"ngIf"],["class","button-row",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matSortActive","name","matSortDirection","desc",1,"data-table",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","Operations"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","no_records"],["mat-footer-cell","","class","no-records",3,"colSpan",4,"matFooterCellDef"],["matColumnDef","selection_records"],["showFirstLastButtons","",3,"pageSize","length","pageSizeOptions"],[1,"row"],[1,"col-lg"],["matInput","","placeholder","Name",3,"formControl"],[1,"button-row"],["mat-raised-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",3,"ngClass"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"click",4,"ngIf"],[3,"click"],["mat-footer-cell","",1,"no-records",3,"colSpan"]],template:function(o,n){1&o&&(t.YNc(0,le,14,1,"mat-accordion",0),t.YNc(1,me,4,0,"div",1),t.TgZ(2,"div",2)(3,"table",3),t.YNc(4,de,1,0,"tr",4),t.YNc(5,ue,1,0,"tr",5),t.YNc(6,fe,2,5,"tr",6),t.ynx(7,7),t.YNc(8,ge,2,0,"th",8),t.YNc(9,_e,2,1,"td",9),t.BQk(),t.ynx(10,10),t.YNc(11,Ce,2,0,"th",8),t.YNc(12,ye,2,1,"td",9),t.BQk(),t.ynx(13,11),t.YNc(14,Te,1,0,"th",12),t.YNc(15,Fe,3,2,"td",9),t.BQk(),t.ynx(16,13),t.YNc(17,Ie,2,1,"td",14),t.BQk(),t.ynx(18,15),t.YNc(19,Se,3,5,"td",14),t.BQk(),t.qZA(),t._UZ(20,"mat-paginator",16),t.ALo(21,"async"),t.qZA()),2&o&&(t.Q6J("ngIf",n.showFilter),t.xp6(1),t.Q6J("ngIf",!n.selectionMode),t.xp6(2),t.Q6J("dataSource",n.dataSource$),t.xp6(1),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",n.footerColumns),t.xp6(14),t.Q6J("pageSize",n.pageSize)("length",t.lcZ(21,9,n.totalCount$))("pageSizeOptions",n.pageSizeOptions))},directives:[h.O5,w.pp,w.ib,w.yz,w.yK,N.KE,U.Nt,p.Fj,p.JJ,p.oH,S.lW,W.V,c.BZ,g.YE,c.as,c.XQ,c.nj,c.Gk,c.Ke,c.Q2,h.mk,c.w1,c.fO,c.ge,g.nU,c.Dz,c.ev,j.D,pe.Z,c.mD,c.yh,I.NW],pipes:[h.Ov],styles:[""]}),e})();const Ze=[{path:"business-area",data:{breadcrumb:"Business area"},children:[{path:"",component:D,data:{type:"business-area",showFilter:!0,expectedRole:"[ROLE_ADMIN, BUSINESS_AREA, BUSINESS_AREA_U]"}},{path:"history",pathMatch:"full",component:F.W,data:{type:"business-area",breadcrumb:"Changes history",expectedRole:"[ROLE_ADMIN, BUSINESS_AREA, BUSINESS_AREA_U]"}}]},{path:"merchandise",data:{breadcrumb:"Merchandise"},children:[{path:"",component:D,data:{type:"merchandise",showFilter:!0,expectedRole:"[ROLE_ADMIN, MERCHANDISE, MERCHANDISE_U]"}},{path:"history",pathMatch:"full",component:F.W,data:{type:"merchandise",breadcrumb:"Changes history",showFilter:!0,expectedRole:"[ROLE_ADMIN, MERCHANDISE, MERCHANDISE_U]"}}]},{path:"pickup-point-type",data:{breadcrumb:"Pickup point type"},children:[{path:"",component:D,data:{type:"pickup-point-type",expectedRole:"[ROLE_ADMIN, PICKUP_POINT_TYPE, PICKUP_POINT_TYPE_U]"}},{path:"history",pathMatch:"full",component:F.W,data:{breadcrumb:"Changes history",type:"pickup-point-type",expectedRole:"[ROLE_ADMIN, PICKUP_POINT_TYPE, PICKUP_POINT_TYPE_U]"}}]},{path:"shop-category",data:{breadcrumb:"Shop category"},children:[{path:"",component:D,data:{type:"shop-category",expectedRole:"[ROLE_ADMIN, SHOP_CATEGORY, SHOP_CATEGORY_U]"}},{path:"history",pathMatch:"full",component:F.W,data:{type:"shop-category",breadcrumb:"Changes history",expectedRole:"[ROLE_ADMIN, SHOP_CATEGORY, SHOP_CATEGORY_U]"}}]},{path:"nomenclature",data:{breadcrumb:"Nomenclature"},children:[{path:"",component:Gt,data:{expectedRole:"[ROLE_ADMIN, NOMENCLATURE, NOMENCLATURE_U]"}},{path:"history",pathMatch:"full",component:F.W,data:{type:"nomenclature",breadcrumb:"Changes history",expectedRole:"[ROLE_ADMIN, NOMENCLATURE, NOMENCLATURE_U]"}}]},{path:"print-info-type",data:{breadcrumb:"Print info type"},children:[{path:"",component:P,data:{expectedRole:"[ROLE_ADMIN, PRINTINFOTYPE, PRINTINFOTYPE_U]"}},{path:"history",pathMatch:"full",component:F.W,data:{type:"print-info-type",breadcrumb:"Changes history",expectedRole:"[ROLE_ADMIN, PRINTINFOTYPE, PRINTINFOTYPE_U]"}}]},{path:"**",redirectTo:"/home"}];let Ee=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[C.Bz.forChild(Ze)],C.Bz]}),e})();var u=s(6642),ht=s(8372),O=s(4128),Y=s(9646),T=s(4004),ve=s(5875);let Ae=(()=>{class e{constructor(o,n){this.actions$=o,this.srv=n,this.getHandbooks$=(0,u.GW)(()=>this.actions$.pipe((0,y.h)(a=>E(a.type)&&a.method===m.U.GET),(0,ht.b)(Z.N.debounceTime),(0,f.w)(a=>(0,O.D)({data:this.srv.get(a.path,a.page.pageNumber,a.page.pageSize,a.page.sortField,a.page.sortOrder,a.handbookName),type:(0,Y.of)(a.type)})),(0,T.U)(a=>({type:`${a.type} Success`,payload:a.data})))),this.addHandbook$=(0,u.GW)(()=>this.actions$.pipe((0,y.h)(a=>E(a.type)&&a.method===m.U.ADD),(0,f.w)(a=>(0,O.D)({data:this.srv.create(a.path,a.simpleHb),type:(0,Y.of)(a.type)})),(0,T.U)(a=>({type:`${a.type} Success`})))),this.updateHandbook$=(0,u.GW)(()=>this.actions$.pipe((0,y.h)(a=>E(a.type)&&a.method===m.U.UPDATE),(0,f.w)(a=>(0,O.D)({data:this.srv.update(a.path,a.id,a.simpleHb.changes),type:(0,Y.of)(a.type)})),(0,T.U)(a=>({type:`${a.type} Success`})))),this.deleteHandbook$=(0,u.GW)(()=>this.actions$.pipe((0,y.h)(a=>E(a.type)&&a.method===m.U.DELETE),(0,f.w)(a=>(0,O.D)({data:this.srv.delete(a.path,a.id,a.name),type:(0,Y.of)(a.type)})),(0,T.U)(a=>({type:`${a.type} Success`}))))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(u.eX),t.LFG(ve.m))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var xe=s(6325),ke=s(2828),Ue=s(520),He=s(4920),we=s(7958);let De=(()=>{class e{constructor(o,n){this.actions$=o,this.srv=n,this.getList$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(k),(0,ht.b)(Z.N.debounceTime),(0,f.w)(a=>this.srv.getList(a.pageInfo.pageNumber,a.pageInfo.pageSize,a.pageInfo.sortField,a.pageInfo.sortOrder)),(0,T.U)(a=>M({list:a.values,total:a.total})))),this.create$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(L),(0,f.w)(a=>this.srv.create(a.nomenclature)),(0,T.U)(()=>rt()))),this.update$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(z),(0,f.w)(a=>this.srv.update(a.update.id.toString(),a.update.changes)),(0,T.U)(()=>st()))),this.delete$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(it),(0,f.w)(a=>this.srv.delete(a.id,a.name)),(0,T.U)(()=>ct())))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(u.eX),t.LFG(we.g))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();const et=(0,r.PH)("[PrintInfoType] Get",(0,r.Ky)()),ft=(0,r.PH)("[PrintInfoType] Create",(0,r.Ky)()),gt=(0,r.PH)("[PrintInfoType] Update",(0,r.Ky)()),Oe=(0,r.PH)("[PrintInfoType] Delete",(0,r.Ky)()),_t=(0,r.PH)("[PrintInfoType] Get Success",(0,r.Ky)()),Ye=(0,r.PH)("[PrintInfoType] Create Success"),qe=(0,r.PH)("[PrintInfoType] Update Success"),Pe=(0,r.PH)("[PrintInfoType] Delete Success"),ot=(0,R.H)({selectId:e=>e.id||""}),Qe=ot.getInitialState({selectedId:null,pageInfo:{pageNumber:0,pageSize:Z.N.pageSize,totalCount:0},isLoading:!1}),Ct="printInfoType",Je=(0,r.Lq)(Qe,(0,r.on)(et,(e,{pageInfo:i})=>(console.log(et.type),Object.assign(Object.assign({},e),{pageInfo:i}))),(0,r.on)(_t,(e,{list:i,total:o})=>(console.log(_t.type),Object.assign(Object.assign({},ot.setAll(i,e)),{isLoading:!1,pageInfo:Object.assign(Object.assign({},e.pageInfo),{totalCount:o})}))),(0,r.on)(ft,gt,Oe,e=>Object.assign(Object.assign({},e),{isLoading:!0})),(0,r.on)(Ye,qe,Pe,e=>Object.assign(Object.assign({},e),{isLoading:!1}))),nt=(0,r.ZF)(Ct),{selectAll:Re}=ot.getSelectors(nt),Le=(0,r.P1)(nt,e=>e.pageInfo.totalCount),ze=(0,r.P1)(nt,e=>e.isLoading);function Me(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Name is required "),t.qZA())}function $e(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Code is required "),t.qZA())}function Be(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Short name is required "),t.qZA())}function Ge(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Weight is required "),t.qZA())}function Ke(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Incorrect value "),t.qZA())}const q=function(e){return{"border-danger":e}};let We=(()=>{class e{constructor(o,n,a,l){this.fb=o,this.dialogRef=n,this.snackBar=a,this.data=l,this.printInfoTypeForm=this.fb.group({nameFC:[this.data.type.name,[p.kI.required]],codeFC:[this.data.type.code,[p.kI.required]],shortNameFC:[this.data.type.shortName,[p.kI.required]]})}onSaveButton(){let o=this.printInfoTypeForm.get("nameFC").value;if(o=o&&o.length>0?o.replace(" ",""):null,!o)return void this.snackBar.openSnackBar("Empty name is not allowed!","red-snackbar");let n=this.printInfoTypeForm.get("codeFC").value;n=Number(n),isNaN(n)?this.snackBar.openSnackBar("Code should be a valid number!","red-snackbar"):(this.data.type.name=this.printInfoTypeForm.get("nameFC").value,this.data.type.code=this.printInfoTypeForm.get("codeFC").value,this.data.type.shortName=this.printInfoTypeForm.get("shortNameFC").value,this.dialogRef.close(this.data.type))}onCancelButton(){this.dialogRef.close()}ngOnDestroy(){this.printInfoTypeForm.reset()}canSave(){return this.printInfoTypeForm.get("nameFC").valid&&this.printInfoTypeForm.get("codeFC").valid&&this.printInfoTypeForm.get("shortNameFC").valid}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.qu),t.Y36(d.so),t.Y36(G.W),t.Y36(d.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-print-info-type-edit"]],decls:23,vars:21,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate","",3,"formGroup"],[1,"add-essence-container"],["matInput","","placeholder","Name","formControlName","nameFC","maxlength","50","required","",3,"ngClass"],[4,"ngIf"],["matInput","","digitOnly","","autocomplete","off","placeholder","Code","formControlName","codeFC","maxlength","50","required","",3,"ngClass"],["matInput","","placeholder","Short name","formControlName","shortNameFC","maxlength","50","required","",3,"ngClass"],["matInput","","placeholder","Weight, kg","formControlName","weightFC","maxlength","50","required","",3,"ngClass"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"]],template:function(o,n){1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"mat-form-field"),t._UZ(6,"input",4),t.YNc(7,Me,2,0,"mat-error",5),t.qZA(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",6),t.YNc(10,$e,2,0,"mat-error",5),t.qZA(),t.TgZ(11,"mat-form-field"),t._UZ(12,"input",7),t.YNc(13,Be,2,0,"mat-error",5),t.qZA(),t.TgZ(14,"mat-form-field"),t._UZ(15,"input",8),t.YNc(16,Ge,2,0,"mat-error",5),t.YNc(17,Ke,2,0,"mat-error",5),t.qZA()()()(),t.TgZ(18,"div",9)(19,"button",10),t.NdJ("click",function(){return n.onCancelButton()}),t._uU(20,"Cancel"),t.qZA(),t.TgZ(21,"button",11),t.NdJ("click",function(){return n.onSaveButton()}),t._uU(22),t.qZA()()),2&o&&(t.xp6(1),t.Oqu(n.data.type.id?"Edit":"Add"),t.xp6(2),t.Q6J("formGroup",n.printInfoTypeForm),t.xp6(3),t.Q6J("ngClass",t.VKq(13,q,n.printInfoTypeForm.get("nameFC").hasError("required")&&n.printInfoTypeForm.get("nameFC").touched)),t.xp6(1),t.Q6J("ngIf",n.printInfoTypeForm.get("nameFC").hasError("required")&&n.printInfoTypeForm.get("nameFC").touched),t.xp6(2),t.Q6J("ngClass",t.VKq(15,q,n.printInfoTypeForm.get("codeFC").hasError("required")&&n.printInfoTypeForm.get("codeFC").touched)),t.xp6(1),t.Q6J("ngIf",n.printInfoTypeForm.get("codeFC").hasError("required")&&n.printInfoTypeForm.get("codeFC").touched),t.xp6(2),t.Q6J("ngClass",t.VKq(17,q,n.printInfoTypeForm.get("shortNameFC").hasError("required")&&n.printInfoTypeForm.get("shortNameFC").touched)),t.xp6(1),t.Q6J("ngIf",n.printInfoTypeForm.get("shortNameFC").hasError("required")&&n.printInfoTypeForm.get("shortNameFC").touched),t.xp6(2),t.Q6J("ngClass",t.VKq(19,q,n.printInfoTypeForm.get("weightFC").hasError("required")&&n.printInfoTypeForm.get("weightFC").touched)),t.xp6(1),t.Q6J("ngIf",n.printInfoTypeForm.get("weightFC").hasError("required")&&n.printInfoTypeForm.get("weightFC").touched),t.xp6(1),t.Q6J("ngIf",n.printInfoTypeForm.get("weightFC").hasError("min")&&n.printInfoTypeForm.get("weightFC").touched),t.xp6(4),t.Q6J("disabled",n.printInfoTypeForm.invalid),t.xp6(1),t.hij(" ",n.data.type.id?"Edit":"Add"," "))},directives:[d.uh,d.xY,p._Y,p.JL,p.sg,N.KE,U.Nt,p.Fj,p.JJ,p.u,p.nD,p.Q7,h.mk,h.O5,N.TO,K.L,d.H8,S.lW],styles:[""]}),e})();function je(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",17)(1,"button",18),t.NdJ("click",function(){return t.CHM(o),t.oxw().openEditDialog(void 0)}),t._uU(2,"Add"),t.qZA(),t._UZ(3,"app-button-history"),t.qZA()}}function Ve(e,i){1&e&&t._UZ(0,"tr",19)}function Xe(e,i){1&e&&t._UZ(0,"tr",20)}const to=function(e){return{hidden:e}};function eo(e,i){if(1&e&&(t._UZ(0,"tr",21),t.ALo(1,"async")),2&e){const o=t.oxw();t.Q6J("ngClass",t.VKq(3,to,t.lcZ(1,1,o.totalCount$)))}}function oo(e,i){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Name"),t.qZA())}function no(e,i){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.name)}}function ao(e,i){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Code"),t.qZA())}function io(e,i){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.code)}}function ro(e,i){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Short name"),t.qZA())}function so(e,i){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.shortName)}}function co(e,i){1&e&&t._UZ(0,"th",24)}function po(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"app-button-edit",26),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit;return t.oxw().openEditDialog(a)}),t.qZA()}}function lo(e,i){if(1&e&&(t.TgZ(0,"td",23),t.YNc(1,po,1,0,"app-button-edit",25),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",!o.selectionMode)}}function mo(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1," No records "),t.qZA()),2&e){const o=t.oxw();t.Q6J("colSpan",o.displayedColumns.length)}}function uo(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"async"),t.qZA()),2&e){const o=t.oxw();t.Q6J("colSpan",o.displayedColumns.length),t.xp6(1),t.AsE(" Selected records: ",o.selection.length,", Total: ",t.lcZ(2,3,o.totalCount$)," ")}}let ho=(()=>{class e{constructor(o,n,a,l,b,v){this.dialog=o,this.router=n,this.pageSize=a,this._pageSizeOptions=l,this.route=b,this.store=v,this.displayedColumns=["name","code","shortName","Operations"],this.footerColumns=["no_records"],this.subscriptions=[],this.selectionMode=!1,this.selection=[],this.dataSource$=this.store.select(Re),this.totalCount$=this.store.select(Le),this.isLoading$=this.store.select(ze);const A=l.split(",");this.pageSizeOptions=[],A.forEach(x=>this.pageSizeOptions.push(parseInt(x,10)))}ngAfterViewInit(){var o;null===(o=this.sort)||void 0===o||o.sortChange.subscribe(()=>this.paginator.pageIndex=0);let n=0;this.subscriptions.push(this.totalCount$.subscribe(a=>n=a||0)),this.subscriptions.push((0,Q.T)(this.paginator.page,this.sort.sortChange).pipe((0,J.O)({})).subscribe(()=>this.store.dispatch(et({pageInfo:{pageNumber:this.paginator.pageIndex,pageSize:this.paginator.pageSize,sortField:this.sort.active,sortOrder:this.sort.direction,totalCount:n}}))))}openHistory(){this.router.navigate(["history"],{relativeTo:this.route})}openEditDialog(o){const n=this.dialog.open(We,{width:"500px",data:{type:o||new P}});this.subscriptions.push(this.isLoading$.pipe((0,y.h)(a=>!a),(0,f.w)(()=>n.afterClosed())).subscribe(a=>{void 0!==a&&(this.store.dispatch(o?gt({update:{id:o.id||"",changes:a}}):ft({newEntry:new P(void 0,a.name,a.code)})),this.search())}))}search(){this.paginator.pageIndex=0,this.paginator.page.emit()}ngOnDestroy(){this.paginator.page.unsubscribe(),this.sort.sortChange.unsubscribe(),this.subscriptions.forEach(o=>o.unsubscribe())}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d.uw),t.Y36(C.F0),t.Y36("pageSize"),t.Y36("pageSizeOptions"),t.Y36(C.gz),t.Y36(r.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-print-info-type"]],viewQuery:function(o,n){if(1&o&&(t.Gf(I.NW,5),t.Gf(g.YE,5)),2&o){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.sort=a.first)}},decls:24,vars:10,consts:[["class","button-row",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matSortActive","name","matSortDirection","desc",1,"data-table",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","shortName"],["matColumnDef","Operations"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","no_records"],["mat-footer-cell","","class","no-records",3,"colSpan",4,"matFooterCellDef"],["matColumnDef","selection_records"],["showFirstLastButtons","",3,"pageSize","length","pageSizeOptions"],[1,"button-row"],["mat-raised-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",3,"ngClass"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"click",4,"ngIf"],[3,"click"],["mat-footer-cell","",1,"no-records",3,"colSpan"]],template:function(o,n){1&o&&(t.YNc(0,je,4,0,"div",0),t.TgZ(1,"div",1)(2,"table",2),t.YNc(3,Ve,1,0,"tr",3),t.YNc(4,Xe,1,0,"tr",4),t.YNc(5,eo,2,5,"tr",5),t.ynx(6,6),t.YNc(7,oo,2,0,"th",7),t.YNc(8,no,2,1,"td",8),t.BQk(),t.ynx(9,9),t.YNc(10,ao,2,0,"th",7),t.YNc(11,io,2,1,"td",8),t.BQk(),t.ynx(12,10),t.YNc(13,ro,2,0,"th",7),t.YNc(14,so,2,1,"td",8),t.BQk(),t.ynx(15,11),t.YNc(16,co,1,0,"th",12),t.YNc(17,lo,2,1,"td",8),t.BQk(),t.ynx(18,13),t.YNc(19,mo,2,1,"td",14),t.BQk(),t.ynx(20,15),t.YNc(21,uo,3,5,"td",14),t.BQk(),t.qZA(),t._UZ(22,"mat-paginator",16),t.ALo(23,"async"),t.qZA()),2&o&&(t.Q6J("ngIf",!n.selectionMode),t.xp6(2),t.Q6J("dataSource",n.dataSource$),t.xp6(1),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",n.footerColumns),t.xp6(17),t.Q6J("pageSize",n.pageSize)("length",t.lcZ(23,8,n.totalCount$))("pageSizeOptions",n.pageSizeOptions))},directives:[h.O5,S.lW,W.V,c.BZ,g.YE,c.as,c.XQ,c.nj,c.Gk,c.Ke,c.Q2,h.mk,c.w1,c.fO,c.ge,g.nU,c.Dz,c.ev,j.D,c.mD,c.yh,I.NW],pipes:[h.Ov],styles:[""]}),e})(),fo=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[{provide:Ue.TP,useClass:He.k,multi:!0}],imports:[[Ee,ke.f,xe.m,r.Aw.forFeature(ut,ae),r.Aw.forFeature(pt,Tt),r.Aw.forFeature(Ct,Je),u.sQ.forFeature([Ae]),u.sQ.forFeature([De]),u.sQ.forFeature([ho])]]}),e})()}}]);